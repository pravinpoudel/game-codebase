{"version":3,"sources":["input.js"],"names":["Keyboard","keys","deletedKeys","handlers","releaser","keyPress","bind","keyRelease","register","window","addEventListener","e","key","handler","elapsedTime","hasOwnProperty","console","warn"],"mappings":";;;;;;;;IAAMA,Q;;;AACJ,sBAAc;AAAA;;AACZ,SAAKC,IAAL,GAAY,EAAZ;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AAEA,SAAKE,QAAL,GAAgB,KAAKA,QAAL,CAAcF,IAAd,CAAmB,IAAnB,CAAhB;AACAG,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKL,QAAxC;AACAI,IAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiC,KAAKH,UAAtC;AACD;;;;6BAEQI,C,EAAG;AACV,WAAKV,IAAL,CAAUU,CAAC,CAACC,GAAZ,IAAmB,IAAnB;AACD;;;+BAEUD,C,EAAG;AACZ,WAAKT,WAAL,CAAiBS,CAAC,CAACC,GAAnB,IAA0B,IAA1B;AACA,aAAO,KAAKX,IAAL,CAAUU,CAAC,CAACC,GAAZ,CAAP;AACD;;;+BAEU;AACT,WAAKX,IAAL,GAAY,EAAZ;AACA,WAAKE,QAAL,GAAgB,EAAhB;AACD;;;6BAEQS,G,EAAKC,O,EAAST,Q,EAAU;AAC/B,WAAKD,QAAL,CAAcS,GAAd,IAAqBC,OAArB;AACA,WAAKT,QAAL,CAAcQ,GAAd,IAAqBR,QAArB;AACD;;;2BAEMU,W,EAAa;AAClB,WAAK,IAAIF,GAAT,IAAgB,KAAKX,IAArB,EAA2B;AACzB,YAAI,KAAKA,IAAL,CAAUc,cAAV,CAAyBH,GAAzB,CAAJ,EAAmC;AACjC,cAAI,KAAKT,QAAL,CAAcS,GAAd,CAAJ,EAAwB;AACtB,iBAAKT,QAAL,CAAcS,GAAd,EAAmBE,WAAnB;AACD,WAFD,MAEO;AACLE,YAAAA,OAAO,CAACC,IAAR,WAAgBL,GAAhB;AACD;AACF;AACF;;AACD,WAAK,IAAIA,IAAT,IAAgB,KAAKV,WAArB,EAAkC;AAChC,YAAI,KAAKA,WAAL,CAAiBa,cAAjB,CAAgCH,IAAhC,CAAJ,EAA0C;AACxC,cAAI,KAAKR,QAAL,CAAcQ,IAAd,CAAJ,EAAwB;AACtB,iBAAKR,QAAL,CAAcQ,IAAd,EAAmBE,WAAnB;;AACA,mBAAO,KAAKZ,WAAL,CAAiBU,IAAjB,CAAP;AACD,WAHD,MAGO;AACLI,YAAAA,OAAO,CAACC,IAAR,WAAgBL,IAAhB;AACD;AACF;AACF;AACF","sourcesContent":["class Keyboard {\r\n  constructor() {\r\n    this.keys = {};\r\n    this.deletedKeys = {};\r\n    this.handlers = {};\r\n    this.releaser = {};\r\n    this.keyPress = this.keyPress.bind(this);\r\n    this.keyRelease = this.keyRelease.bind(this);\r\n\r\n    this.register = this.register.bind(this);\r\n    window.addEventListener(\"keydown\", this.keyPress);\r\n    window.addEventListener(\"keyup\", this.keyRelease);\r\n  }\r\n\r\n  keyPress(e) {\r\n    this.keys[e.key] = true;\r\n  }\r\n\r\n  keyRelease(e) {\r\n    this.deletedKeys[e.key] = true;\r\n    delete this.keys[e.key];\r\n  }\r\n\r\n  cleanAll() {\r\n    this.keys = {};\r\n    this.handlers = {};\r\n  }\r\n\r\n  register(key, handler, releaser) {\r\n    this.handlers[key] = handler;\r\n    this.releaser[key] = releaser;\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    for (let key in this.keys) {\r\n      if (this.keys.hasOwnProperty(key)) {\r\n        if (this.handlers[key]) {\r\n          this.handlers[key](elapsedTime);\r\n        } else {\r\n          console.warn(`${key} does not have handler registered for it`);\r\n        }\r\n      }\r\n    }\r\n    for (let key in this.deletedKeys) {\r\n      if (this.deletedKeys.hasOwnProperty(key)) {\r\n        if (this.releaser[key]) {\r\n          this.releaser[key](elapsedTime);\r\n          delete this.deletedKeys[key];\r\n        } else {\r\n          console.warn(`${key} does not have handler registered for it`);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"file":"input.dev.js"}