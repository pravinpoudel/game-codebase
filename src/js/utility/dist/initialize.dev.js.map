{"version":3,"sources":["initialize.js"],"names":["canvas","document","getElementById","context","manager","Manager","activeButton","href","window","location","dir","substring","lastIndexOf","mouse","x","undefined","y","width","height","isActive","canvasPosition","getBoundingClientRect","addEventListener","handleClick","event","offsetX","offsetY","console","log","localStorage","getItem","setItem","GameState","menu","screens","help","Help","highscores","HighScoreMenu","control","Control","mainmenu","MainMenu","about","About","input","Keyboard","gameplay","GamePlay","isColliding","r1","r2","radius","r1X","player","specs","center","Math","floor","size","r1Y","r1Width","r2X","r2Y","r2Width","drawRectangle","spec","fillStyle","fill","fillRect","strokeStyle","stroke","strokeRect","crossProduct2d","v1","v2","testTolerance","value","test","tolerance","abs","computeAngle","rotation","ptCenter","ptTarget","cos","sin","len","sqrt","dp","angle","acos","cp","crossProduct"],"mappings":"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","sourcesContent":["let canvas = document.getElementById(\"canvas-main\");\r\nlet context;\r\nlet manager = new Manager();\r\nlet activeButton = null;\r\nvar href = window.location.href;\r\nvar dir = href.substring(0, href.lastIndexOf(\"/\")) + \"/\";\r\n\r\nconst mouse = {\r\n  x: undefined,\r\n  y: undefined,\r\n  width: 0.1,\r\n  height: 0.1,\r\n  isActive: false,\r\n};\r\n\r\nconst canvasPosition = canvas.getBoundingClientRect();\r\n\r\n// canvas.addEventListener(\"mousedown\", function (e) {\r\n//   mouse.isActive = true;\r\n// });\r\n\r\n// canvas.addEventListener(\"mousemove\", function (e) {\r\n//   mouse.x = e.x - canvasPosition.left;\r\n//   mouse.y = e.y - canvasPosition.top;\r\n// });\r\n\r\ncanvas.addEventListener(\"click\", handleClick);\r\n\r\nfunction handleClick(event) {\r\n  mouse.x = event.offsetX;\r\n  mouse.y = event.offsetY;\r\n  console.log(mouse.x, mouse.y);\r\n}\r\n\r\ncanvas.addEventListener(\"mouseleave\", function () {\r\n  mouse.x = undefined;\r\n  mouse.y = undefined;\r\n});\r\n\r\nif (!localStorage.getItem(\"upgrade\")) {\r\n  localStorage.setItem(\"upgrade\", \"u\");\r\n}\r\nif (!localStorage.getItem(\"sell\")) {\r\n  localStorage.setItem(\"sell\", \"s\");\r\n}\r\nif (!localStorage.getItem(\"start\")) {\r\n  localStorage.setItem(\"start\", \"g\");\r\n}\r\n\r\nconsole.log(\r\n  localStorage[\"upgrade\"],\r\n  localStorage[\"shell\"],\r\n  localStorage[\"start\"]\r\n);\r\n\r\n// window.addEventListener(\"resize\", resizeCanvas, false);\r\n\r\nGameState.menu = manager;\r\n\r\nlet screens = {\r\n  help: new Help(manager),\r\n  highscores: new HighScoreMenu(manager),\r\n  control: new Control(manager),\r\n  mainmenu: new MainMenu(manager),\r\n  about: new About(manager),\r\n};\r\n\r\nGameState.input = new Keyboard();\r\nconsole.log(GameState.input);\r\nscreens.gameplay = new GamePlay(manager, GameState.input);\r\nGameState.screens = screens;\r\n\r\n// function resizeCanvas() {\r\n//   if (canvas) {\r\n//     canvas.width = window.innerWidth;\r\n//     canvas.height = window.innerHeight;\r\n//     context = canvas.getContext(\"2d\");\r\n//     console.log(canvas);\r\n//   }\r\n// }\r\n// resizeCanvas();\r\n\r\n//------------------------------------------------------\r\n// r2.specs.center.y > r1.specs.y + r1.specs.size.y ||\r\n// r2.specs.center.y + r2.specs.size.y < r1.specs.center.y\r\n\r\nfunction isColliding(r1, r2, radius) {\r\n  let r1X = r1.player.specs.center.x - Math.floor(r1.player.specs.size.x / 2);\r\n  let r1Y = r1.player.specs.center.y - Math.floor(r1.player.specs.size.y / 2);\r\n  let r1Width = r1.player.specs.size.x;\r\n\r\n  let r2X = r2.player.specs.center.x - Math.floor(r2.player.specs.size.x / 2);\r\n  let r2Y = r2.player.specs.center.y - Math.floor(r2.player.specs.size.y / 2);\r\n  let r2Width = r2.player.specs.size.x;\r\n\r\n  return !(\r\n    r1X + r1Width <= r2X - radius ||\r\n    r1X >= r2X + r2Width + radius ||\r\n    r1Y + r1Width <= r2Y - radius ||\r\n    r1Y >= r2Width + r2Y + radius\r\n  );\r\n}\r\nfunction drawRectangle(spec) {\r\n  context.fillStyle = spec.fill;\r\n  context.fillRect(spec.x, spec.y, spec.width, spec.height);\r\n\r\n  context.strokeStyle = spec.stroke;\r\n  context.strokeRect(spec.x, spec.y, spec.width, spec.height);\r\n}\r\n\r\nfunction crossProduct2d(v1, v2) {\r\n  return v1.x * v2.y - v1.y * v2.x;\r\n}\r\n\r\nfunction testTolerance(value, test, tolerance) {\r\n  if (Math.abs(value - test) < tolerance) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction computeAngle(rotation, ptCenter, ptTarget) {\r\n  let v1 = {\r\n    x: Math.cos(rotation),\r\n    y: Math.sin(rotation),\r\n  };\r\n  let v2 = {\r\n    x: ptTarget.x - ptCenter.x,\r\n    y: ptTarget.y - ptCenter.y,\r\n  };\r\n\r\n  v2.len = Math.sqrt(v2.x * v2.x + v2.y * v2.y);\r\n  v2.x /= v2.len;\r\n  v2.y /= v2.len;\r\n\r\n  let dp = v1.x * v2.x + v1.y * v2.y;\r\n  let angle = Math.acos(dp);\r\n\r\n  let cp = crossProduct2d(v1, v2);\r\n\r\n  return {\r\n    angle: angle,\r\n    crossProduct: cp,\r\n  };\r\n}"],"file":"initialize.dev.js"}