{"version":3,"sources":["initialize.js"],"names":["canvas","document","getElementById","context","manager","Manager","activeButton","href","window","location","dir","substring","lastIndexOf","renderCircle","firstTime","selectedTower","mouseCapture","towerClicked","moneyRequired","towerTypeSelected","bombAffectRadius","gameSound","creepGoing","totalCreepKilled","wave","maxWave","nextWave","towerRadius","block","cellWidth","rows","cols","topOffset","leftOffset","mouse","x","undefined","y","width","height","isActive","cellSet","canvasPosition","getBoundingClientRect","towerElements2","towerElements","startButton","localStorage","setItem","getItem","GameState","menu","screens","help","Help","highscores","HighScoreMenu","control","Control","mainmenu","MainMenu","about","About","input","Keyboard","gameplay","GamePlay","isColliding3","x1","y1","w1","h1","x2","y2","w2","h2","isColliding2","width1","width2","isColliding","r1","r2","radius","r1X","player","specs","center","Math","floor","size","r1Y","r1Width","r2Width","baseSprite","image","r2X","r2Y","drawRectangle","spec","fillStyle","fill","fillRect","strokeStyle","stroke","strokeRect","drawTower","assets","drawImage","beginPath","arc","PI","generateRandom","min","max","difference","random","crossProduct2d","v1","v2","normalize","direction","distance","sqrt","testTolerance","value","test","tolerance","abs","computeAngle","rotation","ptCenter","ptTarget","cos","sin","len","dp","angle","acos","cp","crossProduct","mouseOverTower","canCreated","towers","towersLength","length","i","findSelectedTower"],"mappings":"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","sourcesContent":["let canvas = document.getElementById(\"canvas-main\");\r\nlet context;\r\nlet manager = new Manager();\r\nlet activeButton = null;\r\nvar href = window.location.href;\r\nvar dir = href.substring(0, href.lastIndexOf(\"/\")) + \"/\";\r\n\r\nrenderCircle = false;\r\nfirstTime = true;\r\nselectedTower = null;\r\nmouseCapture = false;\r\ntowerClicked = null;\r\nmoneyRequired = 0;\r\ntowerTypeSelected = 1;\r\nbombAffectRadius = 100;\r\ngameSound = null;\r\ncreepGoing = \"top\";\r\ntotalCreepKilled = 0;\r\nwave = 10;\r\nmaxWave = 3;\r\nnextWave = false;\r\ntowerRadius = 100;\r\nblock = false;\r\n\r\nconst cellWidth = 50;\r\nconst rows = 10;\r\nconst cols = 10;\r\nlet topOffset = 250;\r\nlet leftOffset = 50;\r\n\r\nconst mouse = {\r\n  x: undefined,\r\n  y: undefined,\r\n  width: 0.1,\r\n  height: 0.1,\r\n  isActive: false,\r\n};\r\n\r\nconst cellSet = [];\r\nconst canvasPosition = canvas.getBoundingClientRect();\r\n\r\nvar towerElements2;\r\nvar towerElements;\r\nvar startButton;\r\n\r\n// canvas.addEventListener(\"mousedown\", function (e) {\r\n//   mouse.isActive = true;\r\n// });\r\n\r\n// canvas.addEventListener(\"mousemove\", function (e) {\r\n//   mouse.x = e.x - canvasPosition.left;\r\n//   mouse.y = e.y - canvasPosition.top;\r\n// });\r\n\r\n// canvas.addEventListener(\"click\", handleClick);\r\n\r\n// function handleClick(event) {\r\n//   mouse.x = event.offsetX;\r\n//   mouse.y = event.offsetY;\r\n//   console.log(mouse.x, mouse.y);\r\n// }\r\n\r\n// canvas.addEventListener(\"mouseleave\", function () {\r\n//   mouse.x = undefined;\r\n//   mouse.y = undefined;\r\n// });\r\n\r\nif (localStorage[\"upgrade\"] == \"null\") {\r\n  localStorage.setItem(\"upgrade\", \"u\");\r\n}\r\nif (!localStorage.getItem(\"sell\")) {\r\n  localStorage.setItem(\"sell\", \"s\");\r\n}\r\nif (!localStorage.getItem(\"start\")) {\r\n  localStorage.setItem(\"start\", \"s\");\r\n}\r\n\r\n// console.log(\r\n//   localStorage[\"upgrade\"],\r\n//   localStorage[\"shell\"],\r\n//   localStorage[\"start\"]\r\n// );\r\n\r\n// window.addEventListener(\"resize\", resizeCanvas, false);\r\n\r\nGameState.menu = manager;\r\n\r\nlet screens = {\r\n  help: new Help(manager),\r\n  highscores: new HighScoreMenu(manager),\r\n  control: new Control(manager),\r\n  mainmenu: new MainMenu(manager),\r\n  about: new About(manager),\r\n};\r\n\r\nGameState.input = new Keyboard();\r\nscreens.gameplay = new GamePlay(manager, GameState.input);\r\nGameState.screens = screens;\r\n\r\n// function resizeCanvas() {\r\n//   if (canvas) {\r\n//     canvas.width = window.innerWidth;\r\n//     canvas.height = window.innerHeight;\r\n//     context = canvas.getContext(\"2d\");\r\n//     console.log(canvas);\r\n//   }\r\n// }\r\n// resizeCanvas();\r\n\r\n//------------------------------------------------------\r\n// r2.specs.center.y > r1.specs.y + r1.specs.size.y ||\r\n// r2.specs.center.y + r2.specs.size.y < r1.specs.center.y\r\n\r\nfunction isColliding3(x1, y1, w1, h1, x2, y2, w2, h2) {\r\n  if (x1 < x2 + w2 && x1 + w1 > x2 && y1 < y2 + h2 && y1 + h1 > y2) {\r\n    return true;\r\n  }\r\n}\r\n\r\nfunction isColliding2(x1, y1, width1, x2, y2, width2) {\r\n  return !(\r\n    x1 + width1 <= x2 ||\r\n    x1 >= x2 + width2 ||\r\n    y1 + width1 <= y2 ||\r\n    y1 >= width2 + y2\r\n  );\r\n}\r\n\r\nfunction isColliding(r1, r2, radius) {\r\n  let r1X = r1.player.specs.center.x - Math.floor(r1.player.specs.size.x / 2);\r\n  let r1Y = r1.player.specs.center.y - Math.floor(r1.player.specs.size.y / 2);\r\n  let r1Width = r1.player.specs.size.x;\r\n\r\n  // let r2X = r2.player.specs.center.x - Math.floor(r2.player.specs.size.x / 2);\r\n  // let r2Y = r2.player.specs.center.y - Math.floor(r2.player.specs.size.y / 2);\r\n  // let r2Width = r2.player.specs.size.x;\r\n  let r2Width = r2.baseSprite.image.width;\r\n  let r2X = r2.specs.center.x - r2Width;\r\n  let r2Y = r2.specs.center.y - r2Width;\r\n  return !(\r\n    r1X + r1Width <= r2X - radius ||\r\n    r1X >= r2X + r2Width + radius ||\r\n    r1Y + r1Width <= r2Y - radius ||\r\n    r1Y >= r2Width + r2Y + radius\r\n  );\r\n}\r\nfunction drawRectangle(spec) {\r\n  context.fillStyle = spec.fill;\r\n  context.fillRect(spec.x, spec.y, spec.width, spec.height);\r\n\r\n  context.strokeStyle = spec.stroke;\r\n  context.strokeRect(spec.x, spec.y, spec.width, spec.height);\r\n}\r\n\r\nfunction drawTower(radius) {\r\n  let image = GameState.assets[selectedTower];\r\n  context.drawImage(\r\n    image,\r\n    mouse.x - image.width / 2, // Where to draw the sub-texture\r\n    mouse.y - image.height / 2,\r\n    image.width,\r\n    image.height\r\n  );\r\n  context.beginPath();\r\n  context.arc(mouse.x, mouse.y, radius, 0, 2 * Math.PI, false);\r\n  context.stroke();\r\n}\r\n\r\nfunction generateRandom(min = 4, max = 8) {\r\n  let difference = max - min;\r\n  let random = Math.random();\r\n  random = Math.floor(random * difference) + min;\r\n  return random;\r\n}\r\n\r\nfunction crossProduct2d(v1, v2) {\r\n  return v1.x * v2.y - v1.y * v2.x;\r\n}\r\n\r\nfunction normalize(direction) {\r\n  let distance = Math.sqrt(\r\n    direction.x * direction.x + direction.y * direction.y\r\n  );\r\n  direction.x = direction.x / distance;\r\n  direction.y = direction.y / distance;\r\n  return direction;\r\n}\r\n\r\nfunction testTolerance(value, test, tolerance) {\r\n  if (Math.abs(value - test) < tolerance) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction computeAngle(rotation, ptCenter, ptTarget) {\r\n  let v1 = {\r\n    x: Math.cos(rotation),\r\n    y: Math.sin(rotation),\r\n  };\r\n  let v2 = {\r\n    x: ptTarget.x - ptCenter.x,\r\n    y: ptTarget.y - ptCenter.y,\r\n  };\r\n\r\n  v2.len = Math.sqrt(v2.x * v2.x + v2.y * v2.y);\r\n  v2.x /= v2.len;\r\n  v2.y /= v2.len;\r\n\r\n  let dp = v1.x * v2.x + v1.y * v2.y;\r\n  let angle = Math.acos(dp);\r\n\r\n  let cp = crossProduct2d(v1, v2);\r\n\r\n  return {\r\n    angle: angle,\r\n    crossProduct: cp,\r\n  };\r\n}\r\nlet mouseOverTower = null;\r\n\r\nfunction canCreated(towers) {\r\n  let towersLength = towers.length;\r\n  for (let i = 0; i < towersLength; i++) {\r\n    if (\r\n      isColliding2(\r\n        mouse.x,\r\n        mouse.y,\r\n        mouse.width,\r\n        towers[i].specs.center.x - 25,\r\n        towers[i].specs.center.y - 25,\r\n        50\r\n      )\r\n    ) {\r\n      mouseOverTower = towers[i];\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction findSelectedTower(towers) {\r\n  if (!mouse.isActive) {\r\n    if (!canCreated(towers)) {\r\n      towerClicked = mouseOverTower;\r\n    }\r\n  }\r\n}\r\n\r\n"],"file":"initialize.dev.js"}