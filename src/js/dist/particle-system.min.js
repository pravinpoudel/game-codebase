"use strict";var Brickout={pages:{}};function ParticleSystem(r){var e={},i=new Image,s={},c=1;function l(e,t,r){var n={image:i,size:Math.abs(Random.nextGaussian(10,4)),center:{x:t,y:r},direction:{x:e.xDirection,y:e.yDirection},speed:Math.abs(Random.nextGaussian(e.speed.mean,e.speed.stdev)),rotation:0,lifetime:Math.abs(Random.nextGaussian(e.lifetime.mean,e.lifetime.stdev)),alive:0};return e.guassian&&(n.direction={x:0,y:Math.abs(Random.nextGaussian(1,.25))}),n}return e.createEffect=function(e){var t,r,n,i,a=(e.right-e.left)/10,o=(e.bottom-e.top)/10;for(e.speed={mean:20,stdev:2},e.lifetime={mean:e.mean,stdev:e.stdev},t=0;t<e.count;t++)for(n=Math.trunc(e.left+t*a),r=0;r<e.count;r++)i=Math.trunc(e.top+r*o),s[c++]=l(e,n,i)},e.update=function(e){var t,r,n=[];for(t in s)s.hasOwnProperty(t)&&((r=s[t]).center.x+=e/1e3*r.speed*r.direction.x,r.center.y+=e/1e3*r.speed*r.direction.y,r.rotation+=r.speed/500,r.alive+=e,r.alive>r.lifetime&&n.push(t));for(r=0;r<n.length;r++)delete s[n[r]]},e.render=function(){},i.src="assets/fire.png",i.onload=function(){e.render=function(){var e,t;for(e in s)s.hasOwnProperty(e)&&(t=s[e],r.drawImage(t))}},e}Brickout.graphics=function(){var e=document.getElementById("canvas-main"),n=e.getContext("2d");return CanvasRenderingContext2D.prototype.clear=function(){this.save(),this.setTransform(1,0,0,1,0,0),this.clearRect(0,0,e.width,e.height),this.restore()},{clear:function(){n.clear()},drawRectangle:function(e){n.fillStyle=e.fill,n.fillRect(e.x,e.y,e.width,e.height),n.strokeStyle=e.stroke,n.strokeRect(e.x,e.y,e.width,e.height)},drawText:function(e){n.save(),n.font=e.font,n.fillStyle=e.fill,e.hasOwnProperty("stroke")&&(n.strokeStyle=e.stroke),n.textBaseline="top",n.fillText(e.text,e.position.x,e.position.y),n.strokeText(e.text,e.position.x,e.position.y),n.restore()},drawImage:function(e){n.save(),n.translate(e.center.x,e.center.y),n.rotate(e.rotation),n.translate(-e.center.x,-e.center.y),n.drawImage(e.image,e.center.x-e.size/2,e.center.y-e.size/2,e.size,e.size),n.restore()},measureTextWidth:function(e){n.save(),n.font=e.font,n.fillStyle=e.fill,e.hasOwnProperty("stroke")&&(n.strokeStyle=e.stroke);var t=n.measureText(e.text).width;return n.restore(),t},measureTextHeight:function(e){var t=e.text;e.text="m",n.save(),n.font=e.font,n.fillStyle=e.fill,e.hasOwnProperty("stroke")&&(n.strokeStyle=e.stroke);var r=n.measureText(e.text).width;return e.text=t,n.restore(),r}}}();var particleSystem=ParticleSystem(Brickout.graphics);function makeParticle2(e,t,r,n,i,a,o,s,c,l){particleSystem.createEffect({left:e,right:t,top:r,bottom:n,count:i,xDirection:a,yDirection:o,mean:s,stdev:c,gaussian:l})}function creepDied(e,t){makeParticle2(e,e+25,t,t+25,10,0,0,800,200,!0)}function trailFollow(e,t,r,n){makeParticle2(e,e+5,t,t+5,1,r,n,1e3,250,!1)}function bombHit(e,t,r){makeParticle2(e-r/4,e+r/4,t-r/4,t+r/4,5,0,0,500,100,!0)}function towerSold(e,t){makeParticle2(e,e+50,t,t+50,5,0,0,1e3,200,!0)}
//# sourceMappingURL=particle-system.min.js.map
