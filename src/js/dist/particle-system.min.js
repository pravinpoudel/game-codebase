"use strict";var Brickout={pages:{}};function ParticleSystem(r,n){var e={},s={},c=1;function l(e,t,r){var i={image:n,size:Math.abs(Random.nextGaussian(10,4)),center:{x:t,y:r},direction:{x:e.xDirection,y:e.yDirection},speed:Math.abs(Random.nextGaussian(e.speed.mean,e.speed.stdev)),rotation:0,lifetime:Math.abs(Random.nextGaussian(e.lifetime.mean,e.lifetime.stdev)),alive:0};return e.guassian&&(i.direction={x:0,y:Math.abs(Random.nextGaussian(1,.25))}),i}return e.createEffect=function(e){var t,r,i,n,a=(e.right-e.left)/10,o=(e.bottom-e.top)/10;for(e.speed={mean:20,stdev:2},e.lifetime={mean:e.mean,stdev:e.stdev},t=0;t<e.count;t++)for(i=Math.trunc(e.left+t*a),r=0;r<e.count;r++)n=Math.trunc(e.top+r*o),s[c++]=l(e,i,n)},e.update=function(e){var t,r,i=[];for(t in s)s.hasOwnProperty(t)&&((r=s[t]).center.x+=e/1e3*r.speed*r.direction.x,r.center.y+=e/1e3*r.speed*r.direction.y,r.rotation+=r.speed/500,r.alive+=e,r.alive>r.lifetime&&i.push(t));for(r=0;r<i.length;r++)delete s[i[r]]},e.render=function(){},n,e.render=function(){var e,t;for(e in s)s.hasOwnProperty(e)&&(t=s[e],r.drawImage(t))},e}Brickout.graphics=function(){var e=document.getElementById("canvas-main"),i=e.getContext("2d");return CanvasRenderingContext2D.prototype.clear=function(){this.save(),this.setTransform(1,0,0,1,0,0),this.clearRect(0,0,e.width,e.height),this.restore()},{clear:function(){i.clear()},drawRectangle:function(e){i.fillStyle=e.fill,i.fillRect(e.x,e.y,e.width,e.height),i.strokeStyle=e.stroke,i.strokeRect(e.x,e.y,e.width,e.height)},drawText:function(e){i.save(),i.font=e.font,i.fillStyle=e.fill,e.hasOwnProperty("stroke")&&(i.strokeStyle=e.stroke),i.textBaseline="top",i.fillText(e.text,e.position.x,e.position.y),i.strokeText(e.text,e.position.x,e.position.y),i.restore()},drawImage:function(e){i.save(),i.translate(e.center.x,e.center.y),i.rotate(e.rotation),i.translate(-e.center.x,-e.center.y),i.drawImage(e.image,e.center.x-e.size/2,e.center.y-e.size/2,e.size,e.size),i.restore()},measureTextWidth:function(e){i.save(),i.font=e.font,i.fillStyle=e.fill,e.hasOwnProperty("stroke")&&(i.strokeStyle=e.stroke);var t=i.measureText(e.text).width;return i.restore(),t},measureTextHeight:function(e){var t=e.text;e.text="m",i.save(),i.font=e.font,i.fillStyle=e.fill,e.hasOwnProperty("stroke")&&(i.strokeStyle=e.stroke);var r=i.measureText(e.text).width;return e.text=t,i.restore(),r}}}();var particleSystem1=ParticleSystem(Brickout.graphics,GameState.assets.smoke),particleSystem2=ParticleSystem(Brickout.graphics,GameState.assets.fire);function makeParticle2(e,t,r,i,n,a,o,s,c,l){particleSystem2.createEffect({left:e,right:t,top:r,bottom:i,count:n,xDirection:a,yDirection:o,mean:s,stdev:c,gaussian:l})}function makeParticle1(e,t,r,i,n,a,o,s,c,l){particleSystem1.createEffect({left:e,right:t,top:r,bottom:i,count:n,xDirection:a,yDirection:o,mean:s,stdev:c,gaussian:l})}function creepDied(e,t){makeParticle2(e,e+25,t,t+25,10,0,0,800,200,!0)}function trailFollow(e,t,r,i){makeParticle1(e,e+5,t,t+5,1,r,i,1e3,250,!1)}function bombHit(e,t,r){makeParticle2(e-r/4,e+r/4,t-r/4,t+r/4,5,0,0,1e3,200,!0)}function towerSold(e,t){makeParticle2(e,e+50,t,t+50,5,0,0,1e3,200,!0)}
//# sourceMappingURL=particle-system.min.js.map
