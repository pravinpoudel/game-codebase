{"version":3,"sources":["tower.js"],"names":["Tower","spec","specs","baseSprite","Sprite","sprite","center","rotation","weaponSprite","update","bind","render","setTarget","x","y","target","elapsedTime","result","computeAngle","testTolerance","angle","crossProduct","rotateRight","rotateRate","rotateLeft","draw","drawArc"],"mappings":";;;;;;;;IAAMA,K;;;AACJ,iBAAYC,IAAZ,EAAkB;AAAA;;AAChB,SAAKC,KAAL,GAAaD,IAAb;AACA,SAAKE,UAAL,GAAkB,IAAIC,MAAJ,CAAW;AAC3BC,MAAAA,MAAM,EAAEJ,IAAI,CAACE,UADc;AAE3BG,MAAAA,MAAM,EAAEL,IAAI,CAACK,MAFc;AAG3BC,MAAAA,QAAQ,EAAE;AAHiB,KAAX,CAAlB;AAKA,SAAKC,YAAL,GAAoB,IAAIJ,MAAJ,CAAW;AAC7BC,MAAAA,MAAM,EAAEJ,IAAI,CAACO,YADgB;AAE7BF,MAAAA,MAAM,EAAEL,IAAI,CAACK,MAFgB;AAG7BC,MAAAA,QAAQ,EAAE;AAHmB,KAAX,CAApB;AAKA,SAAKL,KAAL,CAAWK,QAAX,GAAsB,CAAtB;AACA,SAAKE,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKE,SAAL,GAAiB,KAAKA,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAjB;AACD;;;;8BAESG,C,EAAGC,C,EAAG;AACd,WAAKZ,KAAL,CAAWa,MAAX,GAAoB;AAClBF,QAAAA,CAAC,EAAEA,CADe;AAElBC,QAAAA,CAAC,EAAEA;AAFe,OAApB;AAID;;;2BAEME,W,EAAa;AAClB,UAAIC,MAAM,GAAGC,YAAY,CACvB,KAAKhB,KAAL,CAAWK,QADY,EAEvB,KAAKL,KAAL,CAAWI,MAFY,EAGvB,KAAKJ,KAAL,CAAWa,MAHY,CAAzB;;AAKA,UAAII,aAAa,CAACF,MAAM,CAACG,KAAR,EAAe,CAAf,EAAkB,IAAlB,CAAb,KAAyC,KAA7C,EAAoD;AAClD,YAAIH,MAAM,CAACI,YAAP,GAAsB,CAA1B,EAA6B;AAC3B,eAAKb,YAAL,CAAkBc,WAAlB,CAA8B,KAAKpB,KAAL,CAAWqB,UAAzC;AACA,eAAKrB,KAAL,CAAWK,QAAX,IAAuB,KAAKL,KAAL,CAAWqB,UAAlC;AACD,SAHD,MAGO;AACL,eAAKf,YAAL,CAAkBgB,UAAlB,CAA6B,KAAKtB,KAAL,CAAWqB,UAAxC;AACA,eAAKrB,KAAL,CAAWK,QAAX,IAAuB,KAAKL,KAAL,CAAWqB,UAAlC;AACD;AACF;AACF;;;6BAEQ;AACP,WAAKpB,UAAL,CAAgBsB,IAAhB;AACA,WAAKjB,YAAL,CAAkBiB,IAAlB,GAFO,CAGP;;AACA,WAAKjB,YAAL,CAAkBkB,OAAlB,CAA0B,GAA1B;AACD","sourcesContent":["class Tower {\r\n  constructor(spec) {\r\n    this.specs = spec;\r\n    this.baseSprite = new Sprite({\r\n      sprite: spec.baseSprite,\r\n      center: spec.center,\r\n      rotation: 0,\r\n    });\r\n    this.weaponSprite = new Sprite({\r\n      sprite: spec.weaponSprite,\r\n      center: spec.center,\r\n      rotation: 0,\r\n    });\r\n    this.specs.rotation = 0;\r\n    this.update = this.update.bind(this);\r\n    this.render = this.render.bind(this);\r\n    this.setTarget = this.setTarget.bind(this);\r\n  }\r\n\r\n  setTarget(x, y) {\r\n    this.specs.target = {\r\n      x: x,\r\n      y: y,\r\n    };\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    let result = computeAngle(\r\n      this.specs.rotation,\r\n      this.specs.center,\r\n      this.specs.target\r\n    );\r\n    if (testTolerance(result.angle, 0, 0.01) === false) {\r\n      if (result.crossProduct > 0) {\r\n        this.weaponSprite.rotateRight(this.specs.rotateRate);\r\n        this.specs.rotation += this.specs.rotateRate;\r\n      } else {\r\n        this.weaponSprite.rotateLeft(this.specs.rotateRate);\r\n        this.specs.rotation -= this.specs.rotateRate;\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.baseSprite.draw();\r\n    this.weaponSprite.draw();\r\n    // A little hack job to show something interesting.\r\n    this.weaponSprite.drawArc(0.4);\r\n  }\r\n}\r\n"],"file":"tower.dev.js"}