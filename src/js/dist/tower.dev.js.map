{"version":3,"sources":["tower.js"],"names":["Tower","spec","specs","baseSprite","Sprite","sprite","center","rotation","weaponSprite","update","bind","render","setTarget","canShoot","animationTime","delay","x","y","target","elapsedTime","result","computeAngle","testTolerance","angle","crossProduct","rotateRight","rotateRate","rotateLeft","draw","drawArc"],"mappings":";;;;;;;;IAAMA,K;;;AACJ,iBAAYC,IAAZ,EAAkB;AAAA;;AAChB,SAAKC,KAAL,GAAaD,IAAb;AACA,SAAKE,UAAL,GAAkB,IAAIC,MAAJ,CAAW;AAC3BC,MAAAA,MAAM,EAAEJ,IAAI,CAACE,UADc;AAE3BG,MAAAA,MAAM,EAAEL,IAAI,CAACK,MAFc;AAG3BC,MAAAA,QAAQ,EAAE;AAHiB,KAAX,CAAlB;AAKA,SAAKC,YAAL,GAAoB,IAAIJ,MAAJ,CAAW;AAC7BC,MAAAA,MAAM,EAAEJ,IAAI,CAACO,YADgB;AAE7BF,MAAAA,MAAM,EAAEL,IAAI,CAACK,MAFgB;AAG7BC,MAAAA,QAAQ,EAAE;AAHmB,KAAX,CAApB;AAKA,SAAKL,KAAL,CAAWK,QAAX,GAAsB,CAAtB;AACA,SAAKE,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKE,SAAL,GAAiB,KAAKA,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKG,QAAL,GAAgB,KAAhB;AACA,SAAKC,aAAL,GAAqB,CAArB;AACA,SAAKC,KAAL,GAAa,KAAKb,KAAL,CAAWa,KAAxB;AACD;;;;8BAESC,C,EAAGC,C,EAAG;AACd,WAAKf,KAAL,CAAWgB,MAAX,GAAoB;AAClBF,QAAAA,CAAC,EAAEA,CADe;AAElBC,QAAAA,CAAC,EAAEA;AAFe,OAApB;AAID;;;2BAEME,W,EAAa;AAClB,UAAIC,MAAM,GAAGC,YAAY,CACvB,KAAKnB,KAAL,CAAWK,QADY,EAEvB,KAAKL,KAAL,CAAWI,MAFY,EAGvB,KAAKJ,KAAL,CAAWgB,MAHY,CAAzB;;AAKA,UAAII,aAAa,CAACF,MAAM,CAACG,KAAR,EAAe,CAAf,EAAkB,IAAlB,CAAb,KAAyC,KAA7C,EAAoD;AAClD,YAAIH,MAAM,CAACI,YAAP,GAAsB,CAA1B,EAA6B;AAC3B,eAAKhB,YAAL,CAAkBiB,WAAlB,CAA8B,KAAKvB,KAAL,CAAWwB,UAAzC;AACA,eAAKxB,KAAL,CAAWK,QAAX,IAAuB,KAAKL,KAAL,CAAWwB,UAAlC;AACD,SAHD,MAGO;AACL,eAAKlB,YAAL,CAAkBmB,UAAlB,CAA6B,KAAKzB,KAAL,CAAWwB,UAAxC;AACA,eAAKxB,KAAL,CAAWK,QAAX,IAAuB,KAAKL,KAAL,CAAWwB,UAAlC;AACD;AACF;;AACD,WAAKZ,aAAL,IAAsBK,WAAtB;;AACA,UAAG,KAAKL,aAAL,GAAqB,KAAKZ,KAAL,CAAWa,KAAnC,EAAyC;AACvC,aAAKD,aAAL,IAAqB,KAAKZ,KAAL,CAAWa,KAAhC;AACA,aAAKF,QAAL,GAAgB,IAAhB;AACD,OAHD,MAII;AACF,aAAKA,QAAL,GAAgB,KAAhB;AACD;AAEF;;;6BAEQ;AACP,WAAKV,UAAL,CAAgByB,IAAhB;AACA,WAAKpB,YAAL,CAAkBoB,IAAlB,GAFO,CAGP;;AACA,WAAKpB,YAAL,CAAkBqB,OAAlB,CAA0B,GAA1B;AACD","sourcesContent":["class Tower {\r\n  constructor(spec) {\r\n    this.specs = spec;\r\n    this.baseSprite = new Sprite({\r\n      sprite: spec.baseSprite,\r\n      center: spec.center,\r\n      rotation: 0,\r\n    });\r\n    this.weaponSprite = new Sprite({\r\n      sprite: spec.weaponSprite,\r\n      center: spec.center,\r\n      rotation: 0,\r\n    });\r\n    this.specs.rotation = 0;\r\n    this.update = this.update.bind(this);\r\n    this.render = this.render.bind(this);\r\n    this.setTarget = this.setTarget.bind(this);\r\n    this.canShoot = false;\r\n    this.animationTime = 0;\r\n    this.delay = this.specs.delay;\r\n  }\r\n\r\n  setTarget(x, y) {\r\n    this.specs.target = {\r\n      x: x,\r\n      y: y,\r\n    };\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    let result = computeAngle(\r\n      this.specs.rotation,\r\n      this.specs.center,\r\n      this.specs.target\r\n    );\r\n    if (testTolerance(result.angle, 0, 0.01) === false) {\r\n      if (result.crossProduct > 0) {\r\n        this.weaponSprite.rotateRight(this.specs.rotateRate);\r\n        this.specs.rotation += this.specs.rotateRate;\r\n      } else {\r\n        this.weaponSprite.rotateLeft(this.specs.rotateRate);\r\n        this.specs.rotation -= this.specs.rotateRate;\r\n      }\r\n    }\r\n    this.animationTime += elapsedTime;\r\n    if(this.animationTime > this.specs.delay){\r\n      this.animationTime-= this.specs.delay;\r\n      this.canShoot = true;\r\n    }\r\n    else{\r\n      this.canShoot = false;\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    this.baseSprite.draw();\r\n    this.weaponSprite.draw();\r\n    // A little hack job to show something interesting.\r\n    this.weaponSprite.drawArc(0.4);\r\n  }\r\n}\r\n"],"file":"tower.dev.js"}