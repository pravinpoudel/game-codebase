{"version":3,"sources":["gameModel.js"],"names":["gameModel","specs","playerEvent","continousMotion","player","animationTime","subImageIndex","subTextureWidth","image","Image","isReady","secondTime","onload","width","spriteCount","src","spriteSheet","collided","elapsedTime","spriteTime","update","center","rotation","size","context","translate","x","y","rotate","drawImage","restore","index","save","height","drawSubTexture"],"mappings":";;;;;;;;IAAMA,S;;;AACJ,qBAAYC,KAAZ,EAAmBC,WAAnB,EAAgCC,eAAhC,EAAiD;AAAA;;AAAA;;AAC/C,SAAKF,KAAL,GAAaA,KAAb;AACA,SAAKG,MAAL,GAAcF,WAAd;AAEA,SAAKG,aAAL,GAAqB,CAArB;AACA,SAAKC,aAAL,GAAqB,CAArB;AACA,SAAKC,eAAL,GAAuB,CAAvB;AAEA,SAAKC,KAAL,GAAa,IAAIC,KAAJ,EAAb;AACA,SAAKC,OAAL,GAAe,KAAf;AAEA,SAAKC,UAAL,GAAkB,KAAlB;;AAEA,SAAKH,KAAL,CAAWI,MAAX,GAAoB,YAAM;AACxB,MAAA,KAAI,CAACF,OAAL,GAAe,IAAf;AACA,MAAA,KAAI,CAACH,eAAL,GAAuB,KAAI,CAACC,KAAL,CAAWK,KAAX,GAAmB,KAAI,CAACZ,KAAL,CAAWa,WAArD;AACD,KAHD;;AAKA,SAAKN,KAAL,CAAWO,GAAX,GAAiB,KAAKd,KAAL,CAAWe,WAA5B;AACA,SAAKb,eAAL,GAAuBA,eAAvB;AACA,SAAKc,QAAL,GAAgB,KAAhB;AACD;;;;2BAEMC,W,EAAa;AAClB,WAAKb,aAAL,IAAsBa,WAAtB;;AACA,UAAI,KAAKb,aAAL,IAAsB,KAAKJ,KAAL,CAAWkB,UAAX,CAAsB,KAAKb,aAA3B,CAA1B,EAAqE;AACnE,aAAKD,aAAL,IAAsB,KAAKJ,KAAL,CAAWkB,UAAX,CAAsB,KAAKb,aAA3B,CAAtB;AACA,aAAKA,aAAL,IAAsB,CAAtB;AACA,aAAKA,aAAL,GAAqB,KAAKA,aAAL,GAAqB,KAAKL,KAAL,CAAWa,WAArD;AACD;;AACD,UAAI,KAAKX,eAAT,EAA0B;AACxB,aAAKC,MAAL,CAAYgB,MAAZ,CAAmBF,WAAnB;AACD;AACF;;;gCAEWV,K,EAAOa,M,EAAQC,Q,EAAUC,I,EAAM;AACzCC,MAAAA,OAAO,CAACC,SAAR,CAAkBJ,MAAM,CAACK,CAAzB,EAA4BL,MAAM,CAACM,CAAnC;AACAH,MAAAA,OAAO,CAACI,MAAR,CAAeN,QAAf;AACAE,MAAAA,OAAO,CAACC,SAAR,CAAkB,CAACJ,MAAM,CAACK,CAA1B,EAA6B,CAACL,MAAM,CAACM,CAArC;AAEAH,MAAAA,OAAO,CAACK,SAAR,CACErB,KADF,EAEEa,MAAM,CAACK,CAAP,GAAWH,IAAI,CAACG,CAAL,GAAS,CAFtB,EAGEL,MAAM,CAACM,CAAP,GAAWJ,IAAI,CAACI,CAAL,GAAS,CAHtB,EAIEJ,IAAI,CAACG,CAJP,EAKEH,IAAI,CAACI,CALP;AAQAH,MAAAA,OAAO,CAACM,OAAR;AACD;;;mCAEctB,K,EAAOuB,K,EAAOxB,e,EAAiBc,M,EAAQC,Q,EAAUC,I,EAAM;AACpEC,MAAAA,OAAO,CAACQ,IAAR;AACAR,MAAAA,OAAO,CAACC,SAAR,CAAkBJ,MAAM,CAACK,CAAzB,EAA4BL,MAAM,CAACM,CAAnC;AACAH,MAAAA,OAAO,CAACI,MAAR,CAAeN,QAAf;AACAE,MAAAA,OAAO,CAACC,SAAR,CAAkB,CAACJ,MAAM,CAACK,CAA1B,EAA6B,CAACL,MAAM,CAACM,CAArC;AAEAH,MAAAA,OAAO,CAACK,SAAR,CACErB,KADF,EAEED,eAAe,GAAGwB,KAFpB,EAGE,CAHF,EAGK;AACHxB,MAAAA,eAJF,EAKEC,KAAK,CAACyB,MALR,EAKgB;AACdZ,MAAAA,MAAM,CAACK,CAAP,GAAWH,IAAI,CAACG,CAAL,GAAS,CANtB,EAMyB;AACvBL,MAAAA,MAAM,CAACM,CAAP,GAAWJ,IAAI,CAACI,CAAL,GAAS,CAPtB,EAQEJ,IAAI,CAACG,CARP,EASEH,IAAI,CAACI,CATP;AAWAH,MAAAA,OAAO,CAACM,OAAR;AACD;;;6BAEQ;AACP,UAAI,KAAKpB,OAAT,EAAkB;AAChB,aAAKwB,cAAL,CACE,KAAK1B,KADP,EAEE,KAAKF,aAFP,EAGE,KAAKC,eAHP,EAIE,KAAKH,MAAL,CAAYH,KAAZ,CAAkBoB,MAJpB,EAKE,KAAKjB,MAAL,CAAYH,KAAZ,CAAkBqB,QALpB,EAME,KAAKlB,MAAL,CAAYH,KAAZ,CAAkBsB,IANpB;AAQA,aAAKZ,UAAL,GAAkB,IAAlB;AACD;AACF","sourcesContent":["class gameModel {\r\n  constructor(specs, playerEvent, continousMotion) {\r\n    this.specs = specs;\r\n    this.player = playerEvent;\r\n\r\n    this.animationTime = 0;\r\n    this.subImageIndex = 0;\r\n    this.subTextureWidth = 0;\r\n\r\n    this.image = new Image();\r\n    this.isReady = false;\r\n\r\n    this.secondTime = false;\r\n\r\n    this.image.onload = () => {\r\n      this.isReady = true;\r\n      this.subTextureWidth = this.image.width / this.specs.spriteCount;\r\n    };\r\n\r\n    this.image.src = this.specs.spriteSheet;\r\n    this.continousMotion = continousMotion;\r\n    this.collided = false;\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    this.animationTime += elapsedTime;\r\n    if (this.animationTime >= this.specs.spriteTime[this.subImageIndex]) {\r\n      this.animationTime -= this.specs.spriteTime[this.subImageIndex];\r\n      this.subImageIndex += 1;\r\n      this.subImageIndex = this.subImageIndex % this.specs.spriteCount;\r\n    }\r\n    if (this.continousMotion) {\r\n      this.player.update(elapsedTime);\r\n    }\r\n  }\r\n\r\n  drawTexture(image, center, rotation, size) {\r\n    context.translate(center.x, center.y);\r\n    context.rotate(rotation);\r\n    context.translate(-center.x, -center.y);\r\n\r\n    context.drawImage(\r\n      image,\r\n      center.x - size.x / 2,\r\n      center.y - size.y / 2,\r\n      size.x,\r\n      size.y\r\n    );\r\n\r\n    context.restore();\r\n  }\r\n\r\n  drawSubTexture(image, index, subTextureWidth, center, rotation, size) {\r\n    context.save();\r\n    context.translate(center.x, center.y);\r\n    context.rotate(rotation);\r\n    context.translate(-center.x, -center.y);\r\n\r\n    context.drawImage(\r\n      image,\r\n      subTextureWidth * index,\r\n      0, // Which sub-texture to pick out\r\n      subTextureWidth,\r\n      image.height, // The size of the sub-texture\r\n      center.x - size.x / 2, // Where to draw the sub-texture\r\n      center.y - size.y / 2,\r\n      size.x,\r\n      size.y\r\n    );\r\n    context.restore();\r\n  }\r\n\r\n  render() {\r\n    if (this.isReady) {\r\n      this.drawSubTexture(\r\n        this.image,\r\n        this.subImageIndex,\r\n        this.subTextureWidth,\r\n        this.player.specs.center,\r\n        this.player.specs.rotation,\r\n        this.player.specs.size\r\n      );\r\n      this.secondTime = true;\r\n    }\r\n  }\r\n}\r\n"],"file":"gameModel.dev.js"}