"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var gameModel=function(){function a(e,t,i){var s=this;_classCallCheck(this,a),this.specs=e,this.player=t,this.animationTime=0,this.subImageIndex=0,this.subTextureWidth=0,this.image=new Image,this.isReady=!1,this.loadedImage=0,this.secondTime=!1,this.images=[],this.index=0,e.spriteSheet.forEach(function(e){var t=new Image;t.src=e,t.onload=function(){s.loadedImage++,s.loadedImage==s.specs.spriteCount&&(s.isReady=!0)},s.images.push(t)}),this.continousMotion=i,this.collided=!1,this.health=e.health,this.maxHealth=e.health,this.meterWidth=40,this.yoffsetBar=20}return _createClass(a,[{key:"update",value:function(e){this.animationTime+=e,this.animationTime>=this.specs.spriteTime[this.subImageIndex]&&(this.animationTime-=this.specs.spriteTime[this.subImageIndex],this.subImageIndex+=1,this.subImageIndex=this.subImageIndex%this.specs.spriteCount),this.continousMotion&&this.player.update(e)}},{key:"reachRight",value:function(){return this.player.reachRight()}},{key:"drawBar",value:function(e,t,i,s,a){context.fillStyle="red";var n=e.x-this.meterWidth/2,h=e.y-i/2-this.yoffsetBar-5;context.fillRect(n,h,this.meterWidth,5),context.fillStyle="green";var r=Math.floor(s/a*this.meterWidth);context.fillRect(n,h,r,5)}},{key:"drawSubTexture",value:function(e,t,i,s,a){context.save(),context.translate(s.x,s.y),context.rotate(a),context.translate(-s.x,-s.y),context.drawImage(e,s.x-e.width/2,s.y-e.height/2,e.width,e.height),context.restore()}},{key:"render",value:function(){if(this.isReady){var e=this.images[this.subImageIndex];this.drawSubTexture(e,this.subImageIndex,this.subTextureWidth,this.player.specs.center,this.player.specs.rotation,this.player.specs.size),this.drawBar(this.player.specs.center,e.width,e.height,this.health,this.maxHealth),this.secondTime=!0}}}]),a}();
//# sourceMappingURL=gameModel.min.js.map
