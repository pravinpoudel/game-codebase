{"version":3,"sources":["modelAnimation.js"],"names":["ModelAnimation","specs","player","_this","this","_classCallCheck","animationTime","subImageIndex","subTextureWidth","image","Image","isReady","secondTime","onload","width","spriteCount","spriteSheet","elapsedTime","spriteTime","center","rotation","size","context","translate","x","y","rotate","restore","drawImage","index","drawSubTexture"],"mappings":"uZAAMA,0BACJ,SAAAA,EAAYC,EAAOC,GAAQ,IAAAC,EAAAC,KAAAC,gBAAAD,KAAAJ,GACzBI,KAAKH,MAAQA,EACbG,KAAKF,OAASA,EAEdE,KAAKE,cAAgB,EACrBF,KAAKG,cAAgB,EACrBH,KAAKI,gBAAkB,EAEvBJ,KAAKK,MAAQ,IAAIC,MACjBN,KAAKO,SAAU,EATUP,KAAAQ,YAAA,EAAAR,KAAAK,MAAAI,OAAA,WAcvBV,EAAKQ,SAAU,EAbjBR,EAAKF,gBAALE,EAAAM,MAAAK,MAAAX,EAAAF,MAAAc,aAIAX,KAAKG,MAAAA,IAAAA,KAALN,MAAAe,gEAIKL,GAELP,KAAKQ,eAAaK,EAYdb,KAAKE,eAAiBF,KAAKH,MAAMiB,WAAWd,KAAKG,iBAVrDH,KAAKK,eAAeL,KAAAH,MAAMiB,WAAAd,KAAAG,eACxBH,KAAIG,eAAJ,EACAH,KAAIG,cAAJH,KAAuBG,cAAAH,KAAmBH,MAAKA,iDAIlDQ,EAAAU,EAAAC,EAAAC,GAYCC,QAAQC,UAAUJ,EAAOK,EAAGL,EAAOM,GACnCH,QAAQI,OAAON,GACfE,QAAQC,WAAWJ,EAAOK,GAAIL,EAAOM,GAXrCH,QAAKhB,UAcHG,EAbFU,EAAIK,EAAKlB,EAAAA,EAAAA,EACPa,EAAKb,EAAAA,EAAAA,EAAL,EACAe,EAAAG,EACAH,EAAAI,GAiBFH,QAAQK,iDAZAJ,EAAUJ,EAAOK,EAAzBL,EAAAC,EAAAC,GACAC,QAAAA,OACAA,QAAAA,UAAQC,EAAWJ,EAAOK,EAAIL,GAE9BG,QAAAA,OAAQM,GAQRN,QAAAA,WAAAH,EAAAK,GAAAL,EAAAM,GASAH,QAAQM,UACNnB,EACAD,EAAkBqB,EAPpBP,EACAA,EACAA,EAAAA,OACAA,EAAOE,EAACD,EAAAA,EAAWJ,EAEnBG,EAAOG,EAACG,EAAAA,EACNnB,EAGAD,EAAAA,EAEAW,EAAAA,GAKFG,QAAAA,2CAIIlB,KAAKO,UAATP,KAAI0B,eACFR,QASAlB,KAAKQ,MACNR,KAAAG,cACFH,KAAAI,gBANKJ,KAAKF,OAAOD,MAAMkB,OAClBf,KAAKF,OAAOD,MAAMmB,SAClBhB,KAAKF,OAAOD,MAAMoB,MAEpBjB,KAAKQ,YAAa","file":"modelAnimation.min.js","sourcesContent":["class ModelAnimation {\r\n  constructor(specs, player) {\r\n    this.specs = specs;\r\n    this.player = player;\r\n\r\n    this.animationTime = 0;\r\n    this.subImageIndex = 0;\r\n    this.subTextureWidth = 0;\r\n\r\n    this.image = new Image();\r\n    this.isReady = false;\r\n\r\n    this.secondTime = false;\r\n\r\n    this.image.onload = () => {\r\n      this.isReady = true;\r\n      this.subTextureWidth = this.image.width / this.specs.spriteCount;\r\n    };\r\n\r\n    this.image.src = this.specs.spriteSheet;\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    this.animationTime += elapsedTime;\r\n    if (this.animationTime >= this.specs.spriteTime[this.subImageIndex]) {\r\n      this.animationTime -= this.specs.spriteTime[this.subImageIndex];\r\n      this.subImageIndex += 1;\r\n      this.subImageIndex = this.subImageIndex % this.specs.spriteCount;\r\n    }\r\n  }\r\n\r\n  drawTexture(image, center, rotation, size) {\r\n    context.translate(center.x, center.y);\r\n    context.rotate(rotation);\r\n    context.translate(-center.x, -center.y);\r\n\r\n    context.drawImage(\r\n      image,\r\n      center.x - size.x / 2,\r\n      center.y - size.y / 2,\r\n      size.x,\r\n      size.y\r\n    );\r\n\r\n    context.restore();\r\n  }\r\n\r\n  drawSubTexture(image, index, subTextureWidth, center, rotation, size) {\r\n    context.save();\r\n    context.translate(center.x, center.y);\r\n    context.rotate(rotation);\r\n    context.translate(-center.x, -center.y);\r\n\r\n    context.drawImage(\r\n      image,\r\n      subTextureWidth * index,\r\n      0, // Which sub-texture to pick out\r\n      subTextureWidth,\r\n      image.height, // The size of the sub-texture\r\n      center.x - size.x / 2, // Where to draw the sub-texture\r\n      center.y - size.y / 2,\r\n      size.x,\r\n      size.y\r\n    );\r\n    context.restore();\r\n  }\r\n\r\n  render() {\r\n    if (this.isReady) {\r\n      this.drawSubTexture(\r\n        context,\r\n        this.image,\r\n        this.subImageIndex,\r\n        this.subTextureWidth,\r\n        this.player.specs.center,\r\n        this.player.specs.rotation,\r\n        this.player.specs.size\r\n      );\r\n      this.secondTime = true;\r\n    }\r\n  }\r\n}\r\n"]}