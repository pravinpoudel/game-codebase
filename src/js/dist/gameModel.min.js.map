{"version":3,"sources":["gameModel.js"],"names":["gameModel","specs","playerEvent","continousMotion","_this","this","_classCallCheck","player","animationTime","subImageIndex","subTextureWidth","image","Image","isReady","secondTime","onload","width","spriteCount","spriteSheet","elapsedTime","spriteTime","collided","update","center","rotation","size","context","translate","y","x","drawImage","restore","index","rotate","drawSubTexture"],"mappings":"uZAAMA,qBACJ,SAAAA,EAAYC,EAAOC,EAAaC,GAAiB,IAAAC,EAAAC,KAAAC,gBAAAD,KAAAL,GAC/CK,KAAKJ,MAAQA,EACbI,KAAKE,OAASL,EAEdG,KAAKG,cAAgB,EACrBH,KAAKI,cAAgB,EACrBJ,KAAKK,gBAAkB,EAEvBL,KAAKM,MAAQ,IAAIC,MACjBP,KAAKQ,SAAU,EATgCR,KAAAS,YAAA,EAAAT,KAAAM,MAAAI,OAAA,WAc7CX,EAAKS,SAAU,EAbjBT,EAAKH,gBAALG,EAAAO,MAAAK,MAAAZ,EAAAH,MAAAgB,aAIAZ,KAAKI,MAAAA,IAAAA,KAALR,MAAAiB,YACAb,KAAKK,gBAAkBP,EAEvBE,KAAKM,UAAQ,sDAeRQ,GAVLd,KAAKM,eAAeQ,EAClBd,KAAKQ,eAALR,KAAAJ,MAAAmB,WAAAf,KAAAI,iBACAJ,KAAIG,eAAJH,KAAuBJ,MAAKU,WAAcN,KAAII,eAFhDJ,KAAAI,eAAA,EAeEJ,KAAKI,cAAgBJ,KAAKI,cAAgBJ,KAAKJ,MAAMgB,aATvDZ,KAAKF,iBACLE,KAAKgB,OAALC,OAAAH,uCAeUR,EAAOY,EAAQC,EAAUC,GACnCC,QAAQC,UAAUJ,EAbbJ,EAAAA,EAa8BS,GAZnCF,QAAKlB,OAAAA,GAcLkB,QAAQC,WAAWJ,EAAOM,GAAIN,EAAOK,GAZnCF,QAAAI,UACAnB,EACAY,EAAKd,EAAAA,EAAAA,EAAL,EACDc,EAAAK,EAAAH,EAAAG,EAAA,EAeCH,EAAKI,EAdPJ,EAAIG,GAGLF,QAAAK,iDAkBcpB,EAAOqB,EAAOtB,EAhBFc,EAgB2BA,EAhBXC,GACzCC,QAAAA,OACAA,QAAAA,UAAeF,EAAfK,EAAAN,EAAAK,GACAF,QAAAA,OAAQC,GAERD,QAAAA,WAAAH,EAAAM,GAEEN,EAAAK,GAOHF,QAAAI,UASGnB,EACAD,EAAkBsB,EAClB,EARFN,EACAA,EAAAA,OACAA,EAAOG,EAACI,EAAOT,EAAAA,EACfE,EAAOE,EAACD,EAAAA,EAAWJ,EAEnBG,EAAAA,EAIEhB,EAAAA,GAGAa,QAAMQ,2CAQJ1B,KAAKQ,UACPR,KAAK6B,eADP7B,KAAIM,MACFN,KAAK6B,cAQL7B,KAAKS,gBACNT,KAAAE,OAAAN,MAAAsB,OACFlB,KAAAE,OAAAN,MAAAuB,SAJKnB,KAAKE,OAAON,MAAMwB,MAEpBpB,KAAKS,YAAa","file":"gameModel.min.js","sourcesContent":["class gameModel {\r\n  constructor(specs, playerEvent, continousMotion) {\r\n    this.specs = specs;\r\n    this.player = playerEvent;\r\n\r\n    this.animationTime = 0;\r\n    this.subImageIndex = 0;\r\n    this.subTextureWidth = 0;\r\n\r\n    this.image = new Image();\r\n    this.isReady = false;\r\n\r\n    this.secondTime = false;\r\n\r\n    this.image.onload = () => {\r\n      this.isReady = true;\r\n      this.subTextureWidth = this.image.width / this.specs.spriteCount;\r\n    };\r\n\r\n    this.image.src = this.specs.spriteSheet;\r\n    this.continousMotion = continousMotion;\r\n    this.collided = false;\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    this.animationTime += elapsedTime;\r\n    if (this.animationTime >= this.specs.spriteTime[this.subImageIndex]) {\r\n      this.animationTime -= this.specs.spriteTime[this.subImageIndex];\r\n      this.subImageIndex += 1;\r\n      this.subImageIndex = this.subImageIndex % this.specs.spriteCount;\r\n    }\r\n    if (this.continousMotion) {\r\n      this.player.update(elapsedTime);\r\n    }\r\n  }\r\n\r\n  drawTexture(image, center, rotation, size) {\r\n    context.translate(center.x, center.y);\r\n    context.rotate(rotation);\r\n    context.translate(-center.x, -center.y);\r\n\r\n    context.drawImage(\r\n      image,\r\n      center.x - size.x / 2,\r\n      center.y - size.y / 2,\r\n      size.x,\r\n      size.y\r\n    );\r\n\r\n    context.restore();\r\n  }\r\n\r\n  drawSubTexture(image, index, subTextureWidth, center, rotation, size) {\r\n    context.save();\r\n    context.translate(center.x, center.y);\r\n    context.rotate(rotation);\r\n    context.translate(-center.x, -center.y);\r\n\r\n    context.drawImage(\r\n      image,\r\n      subTextureWidth * index,\r\n      0, // Which sub-texture to pick out\r\n      subTextureWidth,\r\n      image.height, // The size of the sub-texture\r\n      center.x - size.x / 2, // Where to draw the sub-texture\r\n      center.y - size.y / 2,\r\n      size.x,\r\n      size.y\r\n    );\r\n    context.restore();\r\n  }\r\n\r\n  render() {\r\n    if (this.isReady) {\r\n      this.drawSubTexture(\r\n        this.image,\r\n        this.subImageIndex,\r\n        this.subTextureWidth,\r\n        this.player.specs.center,\r\n        this.player.specs.rotation,\r\n        this.player.specs.size\r\n      );\r\n      this.secondTime = true;\r\n    }\r\n  }\r\n}\r\n"]}