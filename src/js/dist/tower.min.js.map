{"version":3,"sources":["tower.js"],"names":["Tower","spec","_classCallCheck","this","specs","baseSprite","Sprite","sprite","center","rotation","weaponSprite","update","bind","render","x","y","result","computeAngle","setTarget","target","testTolerance","angle","crossProduct","rotateRight","rotateRate","rotateLeft"],"mappings":"uZAAMA,iBACJ,SAAAA,EAAYC,GAAMC,gBAAAC,KAAAH,GAChBG,KAAKC,MAAQH,EACbE,KAAKE,WAAa,IAAIC,OAAO,CAC3BC,OAAQN,EAAKI,WACbG,OAAQP,EAAKO,OACbC,SAAU,IANVT,KAQGU,aAAe,IAAIJ,OAAO,CAC7BC,OAAQN,EAAKS,aACbF,OAAQP,EAAKO,OATjBC,SAAA,IAYEN,KAAKC,MAAMK,SAAW,EAXtBN,KAAKC,OAAQH,KAAbU,OAAAC,KAAAT,MACAA,KAAKE,OAAAA,KAAaQ,OAAIP,KAAOH,MAC3BI,KAAAA,UAAaF,KAAAA,UADcO,KAAAT,6DAA7BW,EAAAC,GAKAZ,KAAKO,KAAAA,OAAL,CACEH,EAAAA,EACAC,EAAAA,oCAKF,IAAAQ,EAAAC,aACAd,KAAKe,MAAAA,SACNf,KAAAC,MAAAI,OAaGL,KAAKC,MAAMe,SAEgC,IAAzCC,cAAcJ,EAAOK,MAAO,EAAG,OACP,EAAtBL,EAAOM,cAbbnB,KAAKF,aAAcsB,YAAApB,KAAAC,MAAAoB,YACjBV,KADiBV,MAAAK,UAAAN,KAAAC,MAAAoB,aAAnBrB,KAAAO,aAAAe,WAAAtB,KAAAC,MAAAoB,YAIDrB,KAAAC,MAAAK,UAAAN,KAAAC,MAAAoB,8CAQCrB,KAAAE,WAAIe,OACFjB,KAAAO,aAAWY,OAETnB,KAAAO,aAAWD,QAAX","file":"tower.min.js","sourcesContent":["class Tower {\r\n  constructor(spec) {\r\n    this.specs = spec;\r\n    this.baseSprite = new Sprite({\r\n      sprite: spec.baseSprite,\r\n      center: spec.center,\r\n      rotation: 0,\r\n    });\r\n    this.weaponSprite = new Sprite({\r\n      sprite: spec.weaponSprite,\r\n      center: spec.center,\r\n      rotation: 0,\r\n    });\r\n    this.specs.rotation = 0;\r\n    this.update = this.update.bind(this);\r\n    this.render = this.render.bind(this);\r\n    this.setTarget = this.setTarget.bind(this);\r\n  }\r\n\r\n  setTarget(x, y) {\r\n    this.spec.target = {\r\n      x: x,\r\n      y: y,\r\n    };\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    let result = computeAngle(\r\n      this.specs.rotation,\r\n      this.specs.center,\r\n      this.specs.target\r\n    );\r\n    if (testTolerance(result.angle, 0, 0.01) === false) {\r\n      if (result.crossProduct > 0) {\r\n        this.weaponSprite.rotateRight(this.specs.rotateRate);\r\n        this.specs.rotation += this.specs.rotateRate;\r\n      } else {\r\n        this.weaponSprite.rotateLeft(this.specs.rotateRate);\r\n        this.specs.rotation -= this.specs.rotateRate;\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.baseSprite.draw();\r\n    this.weaponSprite.draw();\r\n    // A little hack job to show something interesting.\r\n    this.weaponSprite.drawArc(0.4);\r\n  }\r\n}\r\n"]}