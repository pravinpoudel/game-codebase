{"version":3,"sources":["tower.js"],"names":["Tower","spec","_classCallCheck","this","specs","baseSprite","Sprite","sprite","center","rotation","weaponSprite","update","bind","render","delay","x","target","y","canShoot","result","animationTime","testTolerance","angle","crossProduct","rotateRight","rotateRate","rotateLeft","elapsedTime","computeAngle","draw"],"mappings":"uZAAMA,iBACJ,SAAAA,EAAYC,GAAMC,gBAAAC,KAAAH,GAChBG,KAAKC,MAAQH,EACbE,KAAKE,WAAa,IAAIC,OAAO,CAC3BC,OAAQN,EAAKI,WACbG,OAAQP,EAAKO,OACbC,SAAU,IANVT,KAQGU,aAAe,IAAIJ,OAAO,CAC7BC,OAAQN,EAAKS,aACbF,OAAQP,EAAKO,OATjBC,SAAA,IAYEN,KAAKC,MAAMK,SAAW,EAXtBN,KAAKC,OAAQH,KAAbU,OAAAC,KAAAT,MACAA,KAAKE,OAAAA,KAAaQ,OAAIP,KAAOH,MAC3BI,KAAAA,UAAaF,KAAAA,UADcO,KAAAT,MAE3BK,KAAAA,UAAaA,EACbC,KAAAA,cAAU,EAHiBN,KAA7BW,MAAAX,KAAAC,MAAAU,6DAOQC,EAAEd,GACRQ,KAAAA,MAAQO,OAAE,CAHZD,EAAAA,EAKAE,EAAKb,kCAIAc,GACL,IAAAC,EAAKC,aACLjB,KAAKW,MAAQL,SACdN,KAAAC,MAAAI,OAaGL,KAAKC,MAAMY,SAEgC,IAAzCK,cAAcF,EAAOG,MAAO,EAAG,OACP,EAAtBH,EAAOI,cAbbpB,KAAKC,aAAeoB,YAAArB,KAAAC,MAAAqB,YAClBV,KADkBX,MAAAK,UAAAN,KAAAC,MAAAqB,aAApBtB,KAAAO,aAAAgB,WAAAvB,KAAAC,MAAAqB,YAIDtB,KAAAC,MAAAK,UAAAN,KAAAC,MAAAqB,aAiBCtB,KAAKiB,eAAiBO,EAdtBxB,KAAIgB,cAASS,KACXxB,MAAKA,OAeLD,KAAKiB,eAAgBjB,KAAKC,MAAMU,MAXlCX,KAAIkB,UAAAA,GAGAlB,KAAAe,UAAWT,mCAIZN,KAAAE,WAAAwB,OACF1B,KAAAO,aAAAmB","file":"tower.min.js","sourcesContent":["class Tower {\r\n  constructor(spec) {\r\n    this.specs = spec;\r\n    this.baseSprite = new Sprite({\r\n      sprite: spec.baseSprite,\r\n      center: spec.center,\r\n      rotation: 0,\r\n    });\r\n    this.weaponSprite = new Sprite({\r\n      sprite: spec.weaponSprite,\r\n      center: spec.center,\r\n      rotation: 0,\r\n    });\r\n    this.specs.rotation = 0;\r\n    this.update = this.update.bind(this);\r\n    this.render = this.render.bind(this);\r\n    this.setTarget = this.setTarget.bind(this);\r\n    this.canShoot = false;\r\n    this.animationTime = 0;\r\n    this.delay = this.specs.delay;\r\n  }\r\n\r\n  setTarget(x, y) {\r\n    this.specs.target = {\r\n      x: x,\r\n      y: y,\r\n    };\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    let result = computeAngle(\r\n      this.specs.rotation,\r\n      this.specs.center,\r\n      this.specs.target\r\n    );\r\n    if (testTolerance(result.angle, 0, 0.01) === false) {\r\n      if (result.crossProduct > 0) {\r\n        this.weaponSprite.rotateRight(this.specs.rotateRate);\r\n        this.specs.rotation += this.specs.rotateRate;\r\n      } else {\r\n        this.weaponSprite.rotateLeft(this.specs.rotateRate);\r\n        this.specs.rotation -= this.specs.rotateRate;\r\n      }\r\n    }\r\n    this.animationTime += elapsedTime;\r\n    if(this.animationTime > this.specs.delay){\r\n      this.animationTime-= this.specs.delay;\r\n      this.canShoot = true;\r\n    }\r\n    else{\r\n      this.canShoot = false;\r\n    }\r\n  }\r\n  render() {\r\n    this.baseSprite.draw();\r\n    this.weaponSprite.draw();\r\n  }\r\n}\r\n"]}