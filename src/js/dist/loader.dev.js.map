{"version":3,"sources":["loader.js"],"names":["progressSlice","loaderWidth","loader","scriptOrder","scripts","message","onComplete","href","window","location","dir","substring","lastIndexOf","assetOrder","key","source","console","log","length","loadScripts","entry","require","shift","loadAssets","assets","onSuccess","onError","loadAsset","asset","error","xhr","XMLHttpRequest","fileExtension","substr","open","responseType","onload","status","Image","Audio","URL","revokeObjectURL","src","createObjectURL","response","send","mainComplete","canvas","document","getElementById","context","getContext","GameState","menu","initialize","loaderInitiate","totalItems","Math","floor","timerId","setTimeout","loop","clearInterval","style","width","loaderHide","loaderParent","display"],"mappings":"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","sourcesContent":["let progressSlice;\r\nlet loaderWidth = 1;\r\n\r\nloader = (function () {\r\n  \"use strict\";\r\n  let scriptOrder = [\r\n    {\r\n      scripts: [\"random\"],\r\n      message: \"Random number generator loaded\",\r\n      onComplete: null,\r\n    },\r\n    {\r\n      scripts: [\"particle-system\"],\r\n      message: \"Random number generator loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"highscore\"],\r\n      message: \"highscore intialized\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"shortestPath\"],\r\n      message: \"shortest path code is intialized\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"utility/enemyCreator\"],\r\n      message: \"enemy creator system is intialized\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"utility/turretCreator\"],\r\n      message: \"tower creation system is intialized\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"screens/about\"],\r\n      message: \"about is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"bullet\"],\r\n      message: \"bullet is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"bulletcontroller\"],\r\n      message: \"bulletcontroller is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"level\"],\r\n      message: \"level is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"screens/game-play\"],\r\n      message: \" game-play is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"screens/help\"],\r\n      message: \"help is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"screens/highscores\"],\r\n      message: \"highscore is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"screens/control\"],\r\n      message: \"control is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"screens/mainmenu\"],\r\n      message: \"mainmenu is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"screens/menumanager\"],\r\n      message: \"menumanager is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"utility/text\"],\r\n      message: \"enemy is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"tower\"],\r\n      message: \"enemy is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"sprite\"],\r\n      message: \"enemy is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"enemy\"],\r\n      message: \"enemy is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"enemyController\"],\r\n      message: \"enemyController is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"input/input\"],\r\n      message: \"input is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"input/mouse\"],\r\n      message: \"Mouse inputHandler is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"gamemodel\"],\r\n      message: \"modelAnimation is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"movingevents\"],\r\n      message: \"moving object is loaded\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"sound\"],\r\n      message: \"sound intialized\",\r\n      onComplete: null,\r\n    },\r\n\r\n    {\r\n      scripts: [\"utility/initialize\"],\r\n      message: \"game menu intialized\",\r\n      onComplete: null,\r\n    },\r\n  ];\r\n  var href = window.location.href;\r\n  var dir = href.substring(0, href.lastIndexOf(\"/\")) + \"/\";\r\n\r\n  let assetOrder = [\r\n    {\r\n      key: \"fire\",\r\n      source: dir + \"assets/fire.png\",\r\n    },\r\n    {\r\n      key: \"smoke\",\r\n      source: dir + \"assets/smoke.png\",\r\n    },\r\n\r\n    {\r\n      key: \"tower1\",\r\n      source: dir + \"assets/turret/turret-1-1.png\",\r\n    },\r\n\r\n    {\r\n      key: \"tower2\",\r\n      source: dir + \"assets/turret/turret-6-1.png\",\r\n    },\r\n\r\n    {\r\n      key: \"tower3\",\r\n      source: dir + \"assets/turret/turret-4-1.png\",\r\n    },\r\n\r\n    {\r\n      key: \"tower4\",\r\n      source: dir + \"assets/turret/turret-5-1.png\",\r\n    },\r\n\r\n    {\r\n      key: \"base\",\r\n      source: dir + \"assets/turret/turret-base.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep10\",\r\n      source: dir + \"assets/creeps1/1.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep11\",\r\n      source: dir + \"assets/creeps1/2.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep12\",\r\n      source: dir + \"assets/creeps1/3.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep13\",\r\n      source: dir + \"assets/creeps1/4.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep14\",\r\n      source: dir + \"assets/creeps1/5.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep15\",\r\n      source: dir + \"assets/creeps1/6.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep20\",\r\n      source: dir + \"assets/creeps2/1.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep21\",\r\n      source: dir + \"assets/creeps2/2.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep22\",\r\n      source: dir + \"assets/creeps2/3.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep23\",\r\n      source: dir + \"assets/creeps2/4.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep30\",\r\n      source: dir + \"assets/creeps3/1.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep31\",\r\n      source: dir + \"assets/creeps3/2.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep32\",\r\n      source: dir + \"assets/creeps3/3.png\",\r\n    },\r\n\r\n    {\r\n      key: \"creep33\",\r\n      source: dir + \"assets/creeps3/4.png\",\r\n    },\r\n    // {\r\n    //   key: \"end audio\",\r\n    //   source: dir + \"assets/sounds/success_end.mp3\",\r\n    // },\r\n  ];\r\n\r\n  console.log(assetOrder.length);\r\n\r\n  function loadScripts(scripts, onComplete) {\r\n    if (scripts.length > 0) {\r\n      let entry = scripts[0];\r\n      require(entry.scripts, function () {\r\n        if (entry.onComplete) {\r\n          entry.onComplete();\r\n        }\r\n        scripts.shift(); // Alternatively: scripts.splice(0, 1);\r\n        loaderWidth += progressSlice;\r\n        loadScripts(scripts, onComplete);\r\n      });\r\n    } else {\r\n      onComplete();\r\n    }\r\n  }\r\n\r\n  function loadAssets(assets, onSuccess, onError, onComplete) {\r\n    //\r\n    // When we run out of things to load, that is when we call onComplete.\r\n    if (assets.length > 0) {\r\n      let entry = assets[0];\r\n      loadAsset(\r\n        entry.source,\r\n        function (asset) {\r\n          onSuccess(entry, asset);\r\n          assets.shift(); // Alternatively: assets.splice(0, 1);\r\n          loaderWidth += progressSlice;\r\n          loadAssets(assets, onSuccess, onError, onComplete);\r\n        },\r\n        function (error) {\r\n          console.log(error.message);\r\n          onError(error);\r\n          assets.shift(); // Alternatively: assets.splice(0, 1);\r\n          loadAssets(assets, onSuccess, onError, onComplete);\r\n        }\r\n      );\r\n    } else {\r\n      onComplete();\r\n    }\r\n  }\r\n\r\n  function loadAsset(source, onSuccess, onError) {\r\n    let xhr = new XMLHttpRequest();\r\n    let fileExtension = source.substr(source.lastIndexOf(\".\") + 1); // Source: http://stackoverflow.com/questions/680929/how-to-extract-extension-from-filename-string-in-javascript\r\n\r\n    if (fileExtension) {\r\n      xhr.open(\"GET\", source, true);\r\n      xhr.responseType = \"blob\";\r\n\r\n      xhr.onload = function () {\r\n        let asset = null;\r\n        if (xhr.status === 200) {\r\n          if (fileExtension === \"png\" || fileExtension === \"jpg\") {\r\n            asset = new Image();\r\n          } else if (fileExtension === \"mp3\") {\r\n            asset = new Audio();\r\n          } else {\r\n            if (onError) {\r\n              onError(\"Unknown file extension: \" + fileExtension);\r\n            }\r\n          }\r\n          asset.onload = function () {\r\n            // if (fileExtension === \"mp3\") {\r\n            //   console.log(asset.src);\r\n            // }\r\n            window.URL.revokeObjectURL(asset.src);\r\n            if (onSuccess) {\r\n              onSuccess(asset);\r\n            } else {\r\n              console.log(\"hello error\");\r\n            }\r\n          };\r\n          asset.src = window.URL.createObjectURL(xhr.response);\r\n          // console.log(xhr.response);\r\n        } else {\r\n          if (onError) {\r\n            onError(\"Failed to retrieve: \" + source);\r\n          }\r\n        }\r\n      };\r\n    } else {\r\n      if (onError) {\r\n        onError(\"Unknown file extension: \" + fileExtension);\r\n      }\r\n    }\r\n\r\n    xhr.send();\r\n  }\r\n\r\n  function mainComplete() {\r\n    canvas = document.getElementById(\"canvas-main\");\r\n    context = canvas.getContext(\"2d\");\r\n    // const game1 = new Game();\r\n    GameState.menu.initialize();\r\n  }\r\n\r\n  function loaderInitiate() {\r\n    let totalItems = assetOrder.length + scriptOrder.length;\r\n    progressSlice = Math.floor(100 / totalItems);\r\n    let loader = document.getElementById(\"loader\");\r\n    let timerId = setTimeout(loop, 1000);\r\n\r\n    function loop() {\r\n      if (loaderWidth >= 100) {\r\n        clearInterval(timerId);\r\n      } else {\r\n        loader.style.width = loaderWidth + \"%\";\r\n      }\r\n      // console.log(loaderWidth);\r\n    }\r\n  }\r\n\r\n  function loaderHide() {\r\n    let loaderParent = document.getElementById(\"loader_wrapper\");\r\n    loaderParent.style.display = \"none\";\r\n  }\r\n\r\n  loaderInitiate();\r\n  loadAssets(\r\n    assetOrder,\r\n    function (source, asset) {\r\n      // Store it on success\r\n      GameState.assets[source.key] = asset;\r\n    },\r\n    function (error) {\r\n      console.log(error);\r\n    },\r\n    function () {\r\n      loadScripts(scriptOrder, mainComplete);\r\n    }\r\n  );\r\n  loaderHide();\r\n})();\r\n"],"file":"loader.dev.js"}