{"version":3,"sources":["control.js"],"names":["Control","manager","_classCallCheck","this","initialize","bind","run","readControl","controlForm","upgrade","start","_this","self","console","document","getElementById","addEventListener","showScreen","window","event","activeButton","innerText","key","element_key","dataset","log","localStorage","sell"],"mappings":"uZAAMA,mBACJ,SAAAA,EAAYC,GAASC,gBAAAC,KAAAH,GACnBG,KAAKF,QAAUA,EACfE,KAAKC,WAAaD,KAAKC,WAAWC,KAAKF,MACvCA,KAAKG,IAAMH,KAAKG,IAAID,KAAKF,MACzBA,KAAKI,YAAcJ,KAAKI,YAAYF,KAAKF,MACzCA,KAAKK,YAAcL,KAAKK,YAAYH,KAAKF,MACzCA,KAAKM,QAAU,KAPbT,KAAAA,KAQU,KACZG,KAAKO,MAAQ,+DARM,IAAAC,EAAAR,KAYfS,EAAOT,KAXXU,QAAKZ,IAAL,uBACAa,SACAC,eAAgBT,mBAChBU,iBAAmB,QAAKT,WACxBK,EAAKJ,QAALS,WAAwBT,cAGxBU,OAAKR,iBAAL,UAAA,SAAAS,GAcE,GAAIC,aAAc,CAChBA,aAAaC,UAAYF,EAAMG,IAC/B,IAAIC,EAAcH,aAAaI,QAAQF,IACvC,GAAiB,UAAbH,EAAMG,IAdH,OAEXT,OADAA,QAAQY,IAAGF,GACHE,GACRX,IACGC,UAEKW,aAAST,QAAWE,EAAxBG,IAHJ,MAOE,IAAA,OACIF,aAAJ,KAAkBD,EAAAG,IAChBF,MAeE,IAAK,QAbPM,aAAI,MAAJP,EAA2BG,IAG3BT,EAAAA,+CAKEV,KAAAM,QAAAiB,aAAA,QAiBNvB,KAAKwB,KAAOD,aAAY,KAhBlBvB,KAAAO,MAAKgB,aAAL,4CAqBNZ,SAASC,eAAe,kBAAkBM,UAAYlB,KAAKM,QAjBrDK,SACEY,eAAAA,kBACAV,iBAAA,QAAA,SAAAG,GACFC,aAAAN,SAAAC,eAAA,oBAoBND,SAASC,eAAe,eAAeM,UAAYlB,KAAKwB,KAlBpDb,SACDC,eAAA,eAxBHC,iBAAA,QAAA,SAAAG,GA0BDC,aAAAN,SAAAC,eAAA,iBAGCD,SAAKL,eAAUiB,gBAAfL,UAAAlB,KAAAO,MACAI,SACAC,eAAaW,gBACdV,iBAAA,QAAA,SAAAG,GAqBKC,aAAeN,SAASC,eAAe,gDAdvCK,QAAAA,IACDM,aAJH,QAKAZ,aAASC,KACTD,aACGC,OAIAZ,KALHI,cAOAO,KAAAA","file":"control.min.js","sourcesContent":["class Control {\r\n  constructor(manager) {\r\n    this.manager = manager;\r\n    this.initialize = this.initialize.bind(this);\r\n    this.run = this.run.bind(this);\r\n    this.readControl = this.readControl.bind(this);\r\n    this.controlForm = this.controlForm.bind(this);\r\n    this.upgrade = null;\r\n    this.sell = null;\r\n    this.start = null;\r\n  }\r\n\r\n  initialize() {\r\n    let self = this;\r\n    console.log(\"control initialized\");\r\n    document\r\n      .getElementById(\"id-control-back\")\r\n      .addEventListener(\"click\", function () {\r\n        self.manager.showScreen(\"mainmenu\");\r\n      });\r\n\r\n    window.addEventListener(\"keydown\", (event) => {\r\n      //check if there is button selected on control selection form\r\n      if (activeButton) {\r\n        activeButton.innerText = event.key;\r\n        let element_key = activeButton.dataset.key;\r\n        if (event.key == \"Escape\") {\r\n          return;\r\n        }\r\n        console.log(element_key);\r\n        switch (element_key) {\r\n          case \"upgrade\":\r\n            localStorage[\"upgrade\"] = event.key;\r\n            break;\r\n          //   topCode = event.key;\r\n          case \"sell\":\r\n            localStorage[\"sell\"] = event.key;\r\n            break;\r\n          // downCode = event.key;\r\n          case \"start\":\r\n            localStorage[\"start\"] = event.key;\r\n            break;\r\n          //   rightCode = event.key;\r\n        }\r\n        this.run();\r\n      }\r\n    });\r\n  }\r\n\r\n  readControl() {\r\n    this.upgrade = localStorage[\"upgrade\"];\r\n    this.sell = localStorage[\"sell\"];\r\n    this.start = localStorage[\"start\"];\r\n  }\r\n\r\n  controlForm() {\r\n    document.getElementById(\"upgrade_button\").innerText = this.upgrade;\r\n    document\r\n      .getElementById(\"upgrade_button\")\r\n      .addEventListener(\"click\", (event) => {\r\n        activeButton = document.getElementById(\"upgrade_button\");\r\n      });\r\n    document.getElementById(\"sell_button\").innerText = this.sell;\r\n    document\r\n      .getElementById(\"sell_button\")\r\n      .addEventListener(\"click\", (event) => {\r\n        activeButton = document.getElementById(\"sell_button\");\r\n        // console.log(activeButton);\r\n      });\r\n\r\n    document.getElementById(\"start_button\").innerText = this.start;\r\n    document\r\n      .getElementById(\"start_button\")\r\n      .addEventListener(\"click\", (event) => {\r\n        activeButton = document.getElementById(\"start_button\");\r\n      });\r\n  }\r\n\r\n  run() {\r\n    console.log(\r\n      localStorage[\"upgrade\"],\r\n      localStorage[\"sell\"],\r\n      localStorage[\"start\"]\r\n    );\r\n    this.readControl();\r\n    this.controlForm();\r\n  }\r\n}\r\n"]}