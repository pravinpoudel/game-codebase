{"version":3,"sources":["control.js"],"names":["Control","manager","initialize","bind","run","readControl","controlForm","upgrade","sell","start","self","console","log","document","getElementById","addEventListener","showScreen","window","event","activeButton","innerText","key","element_key","dataset","localStorage"],"mappings":"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","sourcesContent":["class Control {\r\n  constructor(manager) {\r\n    this.manager = manager;\r\n    this.initialize = this.initialize.bind(this);\r\n    this.run = this.run.bind(this);\r\n    this.readControl = this.readControl.bind(this);\r\n    this.controlForm = this.controlForm.bind(this);\r\n    this.upgrade = null;\r\n    this.sell = null;\r\n    this.start = null;\r\n  }\r\n\r\n  initialize() {\r\n    let self = this;\r\n    console.log(\"control initialized\");\r\n    document\r\n      .getElementById(\"id-control-back\")\r\n      .addEventListener(\"click\", function () {\r\n        self.manager.showScreen(\"mainmenu\");\r\n      });\r\n\r\n    window.addEventListener(\"keydown\", (event) => {\r\n      //check if there is button selected on control selection form\r\n      if (activeButton) {\r\n        activeButton.innerText = event.key;\r\n        let element_key = activeButton.dataset.key;\r\n        if (event.key == \"Escape\") {\r\n          return;\r\n        }\r\n        console.log(element_key);\r\n        switch (element_key) {\r\n          case \"upgrade\":\r\n            localStorage[\"upgrade\"] = event.key;\r\n            break;\r\n          //   topCode = event.key;\r\n          case \"sell\":\r\n            localStorage[\"sell\"] = event.key;\r\n            break;\r\n          // downCode = event.key;\r\n          case \"start\":\r\n            localStorage[\"start\"] = event.key;\r\n            break;\r\n          //   rightCode = event.key;\r\n        }\r\n        this.run();\r\n      }\r\n    });\r\n  }\r\n\r\n  readControl() {\r\n    this.upgrade = localStorage[\"upgrade\"];\r\n    this.sell = localStorage[\"sell\"];\r\n    this.start = localStorage[\"start\"];\r\n  }\r\n\r\n  controlForm() {\r\n    document.getElementById(\"upgrade_button\").innerText = this.upgrade;\r\n    document\r\n      .getElementById(\"upgrade_button\")\r\n      .addEventListener(\"click\", (event) => {\r\n        activeButton = document.getElementById(\"upgrade_button\");\r\n      });\r\n    document.getElementById(\"sell_button\").innerText = this.sell;\r\n    document\r\n      .getElementById(\"sell_button\")\r\n      .addEventListener(\"click\", (event) => {\r\n        activeButton = document.getElementById(\"sell_button\");\r\n        // console.log(activeButton);\r\n      });\r\n\r\n    document.getElementById(\"start_button\").innerText = this.start;\r\n    document\r\n      .getElementById(\"start_button\")\r\n      .addEventListener(\"click\", (event) => {\r\n        activeButton = document.getElementById(\"start_button\");\r\n      });\r\n  }\r\n\r\n  run() {\r\n    console.log(\r\n      localStorage[\"upgrade\"],\r\n      localStorage[\"sell\"],\r\n      localStorage[\"start\"]\r\n    );\r\n    this.readControl();\r\n    this.controlForm();\r\n  }\r\n}\r\n"],"file":"control.dev.js"}