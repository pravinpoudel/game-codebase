{"version":3,"sources":["game-play.js"],"names":["GamePlay","manager","input","myKeyboard","myMouse","lastTimeStamp","model","initialize","bind","run","playerModel","self","wallModel","renderCircle","sound","particlesSmoke","creeps","makeCreateCreep1","makeCreateCreep2","makeCreateCreep3","towers","registerKey","flyingScores","tower1","Image","src","render","firstTime","downHandler","e","elapsedTime","mouse","isActive","console","log","push","createTower","x","y","length","canvasPosition","canvas","getBoundingClientRect","Mouse","register","GameState","cancelNextRequest","showScreen","bulletController","BulletController","clientX","left","clientY","update","upgrade","localStorage","sell","start","cleanAll","life","creepsLength","i","creep","health","player","specs","center","splice","textEvent","MovingEvents","size","rotation","moveRate","rotateRate","Math","PI","continousSpeed","yDirection","xDirection","FlyingScore","towersLength","tower","isColliding","setTarget","canShoot","direction","target","normalize","bulletStartX","bulletStartY","addBullet","power","scorelength","isVisible","document","getElementById","innerHTML","score","context","clearRect","width","height","drawTower","renderScore","forEach","Sound","loadAudio","performance","now","gameLoop","time","processInput","requestAnimationFrame"],"mappings":"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","sourcesContent":["class GamePlay {\r\n  constructor(manager, input) {\r\n    this.myKeyboard = input;\r\n    this.myMouse = null;\r\n    this.lastTimeStamp;\r\n    this.manager = manager;\r\n    this.model = null;\r\n    this.initialize = this.initialize.bind(this);\r\n    this.run = this.run.bind(this);\r\n    this.playerModel = null;\r\n    self.wallModel = null;\r\n    this.renderCircle = false;\r\n    this.sound = null;\r\n    this.particlesSmoke = null;\r\n    this.creeps = [\r\n      makeCreateCreep1(20, 300),\r\n      makeCreateCreep2(100, 300),\r\n      makeCreateCreep3(300, 300),\r\n    ];\r\n    this.towers = [];\r\n    this.registerKey = this.registerKey.bind(this);\r\n    this.flyingScores = [];\r\n    this.tower1 = new Image();\r\n    this.tower1.src = \"assets/turret/turret-5-3.png\";\r\n    this.render = this.render.bind(this);\r\n    this.firstTime = true;\r\n    this.downHandler = this.downHandler.bind(this);\r\n  }\r\n\r\n   downHandler(e, elapsedTime) {\r\n    mouse.isActive = true;\r\n    if(firstTime){\r\n      console.log(\"firsttime\");\r\n      firstTime = false;\r\n      renderCircle = true;\r\n      mouse.isActive = true;\r\n    }\r\n    else{\r\n      firstTime = true;\r\n      mouse.isActive = false;\r\n      renderCircle = false;\r\n      this.towers.push(\r\n        createTower(\"assets/turret/turret-5-3.png\", mouse.x, mouse.y, 1000, 1)\r\n      );\r\n      console.log(this.towers.length)\r\n  \r\n    }\r\n    const canvasPosition = canvas.getBoundingClientRect(); \r\n    mouse.x = e.x ;\r\n    mouse.y = e.y ; \r\n\r\n}\r\n\r\n  initialize() {\r\n    let self = this;\r\n    this.myMouse = new Mouse();\r\n    self.myKeyboard.register(\"Escape\", function () {\r\n      GameState.cancelNextRequest = true;\r\n      self.manager.showScreen(\"mainmenu\");\r\n    });\r\n\r\n    this.bulletController = new BulletController();\r\n\r\n    this.towers.push(\r\n      createTower(\"assets/turret/turret-5-3.png\", 300, 500, 1000, 1)\r\n    );\r\n    this.towers.push(\r\n      createTower(\"assets/turret/turret-3-3.png\", 600, 500, 2000, 2)\r\n    );\r\n\r\n    this.myMouse.register('mousedown', this.downHandler);\r\n\r\n  // this.myMouse.register('mouseup', function(e, elapsedTime) {\r\n  //   mouse.isActive = false;\r\n  // });\r\n\r\n  this.myMouse.register('mousemove', function(e, elapsedTime) { \r\n    if (mouse.isActive) {\r\n        const canvasPosition = canvas.getBoundingClientRect(); \r\n        mouse.x = e.clientX - canvasPosition.left ;\r\n        mouse.y = e.clientY;    \r\n        this.renderCircle = true; \r\n      }\r\n  });\r\n\r\n  }\r\n\r\n  processInput(elapsedTime) {\r\n    this.myKeyboard.update(elapsedTime);\r\n    this.myMouse.update(elapsedTime);\r\n\r\n  }\r\n\r\n  registerKey() {\r\n    let self = this;\r\n    let upgrade = localStorage[\"upgrade\"];\r\n    let sell = localStorage[\"sell\"];\r\n    let start = localStorage[\"start\"];\r\n    self.myKeyboard.cleanAll();\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    if (GameState.life <= 0) {\r\n      GameState.cancelNextRequest = true;\r\n      this.particlesSmoke.update(elapsedTime);\r\n      return;\r\n    }\r\n    let creepsLength = this.creeps.length;\r\n    for (let i = 0; i < creepsLength; i++) {\r\n      let creep = this.creeps[i];\r\n      if (creep) {\r\n        if (creep.health == 0) {\r\n          let x = creep.player.specs.center.x;\r\n          let y = creep.player.specs.center.y;\r\n          this.creeps.splice(i, 1);\r\n          let textEvent = new MovingEvents({\r\n            size: { x: 50, y: 50 }, // Size in pixels\r\n            center: { x: x, y: y },\r\n            rotation: 0,\r\n            moveRate: 125 / 1000, // Pixels per second\r\n            rotateRate: Math.PI / 1000, // Radians per second\r\n            continousSpeed: 50,\r\n            yDirection: -1,\r\n            xDirection: 0,\r\n          });\r\n          this.flyingScores.push(new FlyingScore(\"10\", textEvent, true));\r\n          continue;\r\n        }\r\n        creep.update(elapsedTime);\r\n        let towersLength = this.towers.length;\r\n        for (let i = 0; i < towersLength; i++) {\r\n          let tower = this.towers[i];\r\n          if (isColliding(creep, tower, 200)) {\r\n            tower.setTarget(\r\n              creep.player.specs.center.x,\r\n              creep.player.specs.center.y\r\n            );\r\n            if (tower.canShoot) {\r\n              let direction = {\r\n                x: tower.specs.target.x - tower.specs.center.x,\r\n                y: tower.specs.target.y - tower.specs.center.y,\r\n              };\r\n              direction = normalize(direction);\r\n              let bulletStartX = tower.specs.center.x;\r\n              let bulletStartY = tower.specs.center.y;\r\n\r\n              this.bulletController.addBullet(\r\n                bulletStartX,\r\n                bulletStartY,\r\n                creep,\r\n                tower.specs.power\r\n              );\r\n            }\r\n          }\r\n          tower.update(elapsedTime);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.bulletController.update(elapsedTime);\r\n    let scorelength = this.flyingScores.length;\r\n    for (let i = 0; i < scorelength; i++) {\r\n      this.flyingScores[i].update(elapsedTime);\r\n      if (!this.flyingScores[i].isVisible) {\r\n        this.flyingScores.splice(i, 1);\r\n        i--;\r\n        scorelength--;\r\n      }\r\n    }\r\n  }\r\n\r\n  renderScore() {\r\n    document.getElementById(\"currentScore\").innerHTML = score;\r\n    document.getElementById(\"lives\").innerHTML = GameState.life;\r\n  }\r\n\r\n  render() {\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    if(renderCircle){\r\n      drawTower(this.tower1, 200);\r\n\r\n    }\r\n    this.renderScore();\r\n    this.creeps.forEach((creep) => {\r\n      creep.render();\r\n    });\r\n    let towersLength = this.towers.length;\r\n    for (let i = 0; i < towersLength; i++) {\r\n      let tower = this.towers[i];\r\n      tower.render();\r\n    }\r\n    this.bulletController.render();\r\n    let scorelength = this.flyingScores.length;\r\n    for (let i = 0; i < scorelength; i++) {\r\n      this.flyingScores[i].render();\r\n    }\r\n  }\r\n\r\n  run() {\r\n    let self = this;\r\n    this.sound = new Sound();\r\n\r\n    this.sound.loadAudio();\r\n    this.registerKey();\r\n\r\n    // this.myKeyboard.register(\"ArrowUp\", self.playerModel.player.moveTop);\r\n    // this.myKeyboard.register(\"ArrowDown\", self.playerModel.player.moveDown);\r\n    // this.myKeyboard.register(\"ArrowLeft\", self.playerModel.player.moveLeft);\r\n    // this.myKeyboard.register(\"ArrowRight\", self.playerModel.player.moveRight);\r\n    // console.log(self.playerModel.moveRight);\r\n\r\n    let lastTimeStamp = performance.now();\r\n    GameState.cancelNextRequest = false;\r\n\r\n    function gameLoop(time) {\r\n      self.processInput(time - lastTimeStamp);\r\n      self.update(time - lastTimeStamp);\r\n      lastTimeStamp = time;\r\n      self.render();\r\n      if (!GameState.cancelNextRequest) {\r\n        requestAnimationFrame(gameLoop);\r\n      }\r\n    }\r\n    requestAnimationFrame(gameLoop);\r\n  }\r\n}\r\n"],"file":"game-play.dev.js"}