{"version":3,"sources":["game-play.js"],"names":["GamePlay","manager","input","_classCallCheck","this","myKeyboard","lastTimeStamp","model","initialize","bind","run","self","register","GameState","player","MovingObject","size","x","center","playerModel","y","rotation","moveRate","rotateRate","Math","PI","ModelAnimation","cancelNextRequest","showScreen","moveForward","rotateLeft","rotateRight","elapsedTime","log","update","spriteCount","spriteTime","render","turnUp","turnDown","console","turnLeft","turnRight","performance","now","requestAnimationFrame","time","processInput","gameLoop"],"mappings":"uZAAMA,oBACJ,SAAAA,EAAYC,EAASC,GAAOC,gBAAAC,KAAAJ,GAC1BI,KAAKC,WAAaH,EAClBE,KAAKE,cACLF,KAAKH,QAAUA,EACfG,KAAKG,MAAQ,KACbH,KAAKI,WAAaJ,KAAKI,WAAWC,KAAKL,MACvCA,KAAKM,IAAMN,KAAKM,IAAID,KAAKL,MAPvBJ,KAAAA,YAQiB,+DAPO,IAAAW,EAAAP,KAY1BO,EAAKN,WAAWO,SAAS,SAAU,WAXnCC,UAAKR,mBAAL,EACAM,EAAKL,QAAAA,WAAL,cAGA,IAAAQ,EAAKN,IAALO,aAAuBP,CACvBQ,KAAA,CAAAC,EAAW,GAAKP,EAAID,IACpBS,OAAKC,CAAAA,EAAAA,GAAcC,EAAA,KACpBC,SAAA,EAaGC,SAAU,KACVC,WAAYC,KAAKC,GAAK,MAJtBT,EAAAA,YAAM,IAAAU,eAPR,CACAf,YAAKN,8BACHQ,YAAUc,GACVhB,WAAKV,CAAAA,GAAQ2B,GAAAA,GAAb,GAAwB,GAAA,GAAxB,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,KAIMd,GAAEG,EAAAA,WAAFL,SAAA,IAAAE,EAAAe,aAAST,EAAAA,WAAGR,SAAA,IAAAE,EAAAgB,YAAZnB,EADsBN,WAAAO,SAAA,IAAAE,EAAAiB,kDAEpBC,GAASZ,QAACa,IAAE,iBAAZ7B,KAFoBC,WAAA6B,OAAAF,kCAINA,GACtBT,KAAAA,YAAYC,OAAAQ,oCAKZG,QAAAA,IAAAA,kBACAC,KAAAA,YAAaC,uCA4Bf,IAAI1B,EAAOP,KACXA,KAAKC,WAAWO,SAAS,UAAWD,EAAKQ,YAAYmB,QACrDlC,KAAKC,WAAWO,SAAS,YArBdoB,EAAab,YAAAoB,UACxBC,KAAAA,WAAY5B,SAAA,YAAZD,EAAAQ,YAAAsB,UACArC,KAAAC,WAAKA,SAAkB2B,aAAvBrB,EAAAQ,YAAAuB,WAuBA,IAAIpC,EAAgBqC,YAAYC,MAChC/B,UAAUc,mBAAoB,EAV/BkB,sBAVC,SAAK1B,EAAL2B,GAEDnC,EAAAoC,aAAAD,EAAAxC,GAsBGK,EAAKuB,OAAOY,EAAOxC,GACnBA,EAAgBwC,EAChBnC,EAAK0B,SArBPG,UAAYb,mBACZkB,sBAAAG","file":"game-play.min.js","sourcesContent":["class GamePlay {\r\n  constructor(manager, input) {\r\n    this.myKeyboard = input;\r\n    this.lastTimeStamp;\r\n    this.manager = manager;\r\n    this.model = null;\r\n    this.initialize = this.initialize.bind(this);\r\n    this.run = this.run.bind(this);\r\n    this.playerModel = null;\r\n  }\r\n\r\n  initialize() {\r\n    let self = this;\r\n    self.myKeyboard.register(\"Escape\", function () {\r\n      GameState.cancelNextRequest = true;\r\n      self.manager.showScreen(\"mainmenu\");\r\n    });\r\n\r\n    let player = new MovingObject({\r\n      size: { x: 50, y: 50 }, // Size in pixels\r\n      center: { x: 50, y: 150 },\r\n      rotation: 0,\r\n      moveRate: 125 / 1000, // Pixels per second\r\n      rotateRate: Math.PI / 1000, // Radians per second\r\n    });\r\n\r\n    let playerSpecs = {\r\n      spriteSheet: \"assets/spritesheet-bird.png\",\r\n      spriteCount: 14,\r\n      spriteTime: [25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25],\r\n    };\r\n\r\n    self.playerModel = new ModelAnimation(playerSpecs, player);\r\n    self.myKeyboard.register(\"w\", player.moveForward);\r\n    self.myKeyboard.register(\"a\", player.rotateLeft);\r\n    self.myKeyboard.register(\"d\", player.rotateRight);\r\n  }\r\n\r\n  processInput(elapsedTime) {\r\n    console.log(\"input pressed\");\r\n    this.myKeyboard.update(elapsedTime);\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    this.playerModel.update(elapsedTime);\r\n    // model.update(elapsedTime);\r\n  }\r\n\r\n  render() {\r\n    console.log(\"i am rendering\");\r\n    this.playerModel.render();\r\n    //draw things\r\n    // graphics.clear();\r\n    // renderGame(model, graphics); // draw background, obstacles, scene and player here\r\n  }\r\n\r\n  run() {\r\n    let self = this;\r\n    this.myKeyboard.register(\"ArrowUp\", self.playerModel.turnUp);\r\n    this.myKeyboard.register(\"ArrowDown\", self.playerModel.turnDown);\r\n    this.myKeyboard.register(\"ArrowLeft\", self.playerModel.turnLeft);\r\n    this.myKeyboard.register(\"ArrowRight\", self.playerModel.turnRight);\r\n\r\n    let lastTimeStamp = performance.now();\r\n    GameState.cancelNextRequest = false;\r\n\r\n    function gameLoop(time) {\r\n      self.processInput(time - lastTimeStamp);\r\n      self.update(time - lastTimeStamp);\r\n      lastTimeStamp = time;\r\n      self.render();\r\n      if (!GameState.cancelNextRequest) {\r\n        requestAnimationFrame(gameLoop);\r\n      }\r\n    }\r\n    requestAnimationFrame(gameLoop);\r\n  }\r\n}\r\n"]}