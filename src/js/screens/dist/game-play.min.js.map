{"version":3,"sources":["game-play.js"],"names":["GamePlay","manager","input","_classCallCheck","this","myKeyboard","cancelNextRequest","lastTimeStamp","model","initialize","bind","run","playerModel","self","register","player","MovingObject","size","x","center","y","rotation","moveRate","rotateRate","Math","PI","ModelAnimation","showScreen","moveForward","rotateLeft","rotateRight","elapsedTime","log","update","spriteCount","spriteTime","time","processInput","console","requestAnimationFrame","gameLoop","GameModel","registerCommand","turnUp","turnDown","turnLeft","turnRight","performance","now"],"mappings":"uZAAMA,oBACJ,SAAAA,EAAYC,EAASC,GAAOC,gBAAAC,KAAAJ,GAC1BI,KAAKC,WAAaH,EAClBE,KAAKE,mBAAoB,EACzBF,KAAKG,cACLH,KAAKH,QAAUA,EACfG,KAAKI,MAAQ,KACbJ,KAAKK,WAAaL,KAAKK,WAAWC,KAAKN,MAPrCJ,KAAAA,IAQSI,KAAKO,IAAID,KAAKN,MACzBA,KAAKQ,YAAc,kHAInB,IAAIC,EAAOT,KAXXS,EAAKR,WAALS,SAAA,SAAA,WACAR,mBAAA,EACAO,EAAKN,QAAAA,WAAL,cAGA,IAAAQ,EAAKN,IAALO,aAAuBP,CACvBQ,KAAA,CAAAC,EAAW,GAAKP,EAAID,IACpBS,OAAKP,CAAAA,EAAAA,GAAcQ,EAAA,KACpBC,SAAA,EAaGC,SAAU,KACVC,WAAYC,KAAKC,GAAK,MAJtBR,EAAAA,YAAM,IAAAS,eAPR,CACAb,YAAKR,8BACHC,YAAAA,GACAO,WAAKZ,CAAAA,GAAQ0B,GAAAA,GAAb,GAAwB,GAAA,GAAxB,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,KAIMZ,GAAEG,EAAAA,WAAFJ,SAAA,IAAAC,EAAAa,aAASR,EAAAA,WAAGN,SAAA,IAAAC,EAAAc,YAAZhB,EADsBR,WAAAS,SAAA,IAAAC,EAAAe,kDAEpBC,GAASX,QAACY,IAAE,iBAAZnB,KAFoBR,WAAA4B,OAAAF,kCAINA,GACtBR,YAAAA,OAAYC,oCAKZU,QAAAA,IAAAA,kBACAC,YAAAA,6CAOHC,GAqBCC,aAAaD,EAAO7B,eACpB0B,OAAOG,EAAO7B,eACdA,cAAgB6B,EApBhBE,SAEDhC,mBAsBGiC,sBAAsBC,sFAMxBhC,MAAQiC,YACRpC,WAAWqC,gBAtBJ,UAAAlC,MAAAmC,QACPL,WAAQN,gBAAI,YAAZxB,MAAAoC,UACAhC,WAAAA,gBACA,YAAAJ,MAAAqC,UACAxC,WAAAqC,gBAAA,aAAAlC,MAAAsC,WAEDvC,cAAAwC,YAAAC,MAsBC1C,mBAAoB,EACpBiC,sBAAsBC","file":"game-play.min.js","sourcesContent":["class GamePlay {\r\n  constructor(manager, input) {\r\n    this.myKeyboard = input;\r\n    this.cancelNextRequest = false;\r\n    this.lastTimeStamp;\r\n    this.manager = manager;\r\n    this.model = null;\r\n    this.initialize = this.initialize.bind(this);\r\n    this.run = this.run.bind(this);\r\n    this.playerModel = null;\r\n  }\r\n\r\n  initialize() {\r\n    let self = this;\r\n    self.myKeyboard.register(\"Escape\", function () {\r\n      cancelNextRequest = true;\r\n      self.manager.showScreen(\"mainmenu\");\r\n    });\r\n\r\n    let player = new MovingObject({\r\n      size: { x: 50, y: 50 }, // Size in pixels\r\n      center: { x: 50, y: 150 },\r\n      rotation: 0,\r\n      moveRate: 125 / 1000, // Pixels per second\r\n      rotateRate: Math.PI / 1000, // Radians per second\r\n    });\r\n\r\n    let playerSpecs = {\r\n      spriteSheet: \"assets/spritesheet-bird.png\",\r\n      spriteCount: 14,\r\n      spriteTime: [25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25],\r\n    };\r\n\r\n    self.playerModel = new ModelAnimation(playerSpecs, player);\r\n    self.myKeyboard.register(\"w\", player.moveForward);\r\n    self.myKeyboard.register(\"a\", player.rotateLeft);\r\n    self.myKeyboard.register(\"d\", player.rotateRight);\r\n  }\r\n\r\n  processInput(elapsedTime) {\r\n    console.log(\"input pressed\");\r\n    self.myKeyboard.update(elapsedTime);\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    playerModel.update(elapsedTime);\r\n    // model.update(elapsedTime);\r\n  }\r\n\r\n  render() {\r\n    console.log(\"i am rendering\");\r\n    playerModel.render();\r\n    //draw things\r\n    // graphics.clear();\r\n    // renderGame(model, graphics); // draw background, obstacles, scene and player here\r\n  }\r\n\r\n  gameLoop(time) {\r\n    processInput(time - lastTimeStamp);\r\n    update(time - lastTimeStamp);\r\n    lastTimeStamp = time;\r\n    render();\r\n\r\n    if (!cancelNextRequest) {\r\n      requestAnimationFrame(gameLoop);\r\n    }\r\n  }\r\n\r\n  run() {\r\n    //create player\r\n    model = GameModel();\r\n    myKeyboard.registerCommand(\"ArrowUp\", model.turnUp);\r\n    myKeyboard.registerCommand(\"ArrowDown\", model.turnDown);\r\n    myKeyboard.registerCommand(\"ArrowLeft\", model.turnLeft);\r\n    myKeyboard.registerCommand(\"ArrowRight\", model.turnRight);\r\n\r\n    lastTimeStamp = performance.now();\r\n    cancelNextRequest = false;\r\n    requestAnimationFrame(gameLoop);\r\n  }\r\n}\r\n"]}